{
  "version": 3,
  "sources": ["../../node_modules/echarts/lib/layout/barGrid.js", "../../node_modules/echarts/lib/scale/Scale.js", "../../node_modules/echarts/lib/data/OrdinalMeta.js", "../../node_modules/echarts/lib/scale/helper.js", "../../node_modules/echarts/lib/scale/Ordinal.js", "../../node_modules/echarts/lib/scale/Interval.js", "../../node_modules/echarts/lib/scale/Time.js", "../../node_modules/echarts/lib/scale/Log.js", "../../node_modules/echarts/lib/coord/scaleRawExtentInfo.js", "../../node_modules/echarts/lib/coord/axisHelper.js"],
  "sourcesContent": ["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\r\nimport { parsePercent } from '../util/number.js';\r\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\r\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\r\nimport { createFloat32Array } from '../util/vendor.js';\r\nvar STACK_PREFIX = '__ec_stack_';\r\n\r\nfunction getSeriesStackId(seriesModel) {\r\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\r\n}\r\n\r\nfunction getAxisKey(axis) {\r\n  return axis.dim + axis.index;\r\n}\r\n/**\r\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\r\n */\r\n\r\n\r\nexport function getLayoutOnAxis(opt) {\r\n  var params = [];\r\n  var baseAxis = opt.axis;\r\n  var axisKey = 'axis0';\r\n\r\n  if (baseAxis.type !== 'category') {\r\n    return;\r\n  }\r\n\r\n  var bandWidth = baseAxis.getBandWidth();\r\n\r\n  for (var i = 0; i < opt.count || 0; i++) {\r\n    params.push(defaults({\r\n      bandWidth: bandWidth,\r\n      axisKey: axisKey,\r\n      stackId: STACK_PREFIX + i\r\n    }, opt));\r\n  }\r\n\r\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\r\n  var result = [];\r\n\r\n  for (var i = 0; i < opt.count; i++) {\r\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\r\n    item.offsetCenter = item.offset + item.width / 2;\r\n    result.push(item);\r\n  }\r\n\r\n  return result;\r\n}\r\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\r\n  var seriesModels = [];\r\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n    // Check series coordinate, do layout for cartesian2d only\r\n    if (isOnCartesian(seriesModel)) {\r\n      seriesModels.push(seriesModel);\r\n    }\r\n  });\r\n  return seriesModels;\r\n}\r\n/**\r\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\r\n * values.\r\n * This works for time axes, value axes, and log axes.\r\n * For a single time axis, return value is in the form like\r\n * {'x_0': [1000000]}.\r\n * The value of 1000000 is in milliseconds.\r\n */\r\n\r\nfunction getValueAxesMinGaps(barSeries) {\r\n  /**\r\n   * Map from axis.index to values.\r\n   * For a single time axis, axisValues is in the form like\r\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\r\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\r\n   * series.\r\n   */\r\n  var axisValues = {};\r\n  each(barSeries, function (seriesModel) {\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n\r\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\r\n      return;\r\n    }\r\n\r\n    var data = seriesModel.getData();\r\n    var key = baseAxis.dim + '_' + baseAxis.index;\r\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\r\n    var store = data.getStore();\r\n\r\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\r\n      var value = store.get(dimIdx, i);\r\n\r\n      if (!axisValues[key]) {\r\n        // No previous data for the axis\r\n        axisValues[key] = [value];\r\n      } else {\r\n        // No value in previous series\r\n        axisValues[key].push(value);\r\n      } // Ignore duplicated time values in the same axis\r\n\r\n    }\r\n  });\r\n  var axisMinGaps = {};\r\n\r\n  for (var key in axisValues) {\r\n    if (axisValues.hasOwnProperty(key)) {\r\n      var valuesInAxis = axisValues[key];\r\n\r\n      if (valuesInAxis) {\r\n        // Sort axis values into ascending order to calculate gaps\r\n        valuesInAxis.sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var min = null;\r\n\r\n        for (var j = 1; j < valuesInAxis.length; ++j) {\r\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\r\n\r\n          if (delta > 0) {\r\n            // Ignore 0 delta because they are of the same axis value\r\n            min = min === null ? delta : Math.min(min, delta);\r\n          }\r\n        } // Set to null if only have one data\r\n\r\n\r\n        axisMinGaps[key] = min;\r\n      }\r\n    }\r\n  }\r\n\r\n  return axisMinGaps;\r\n}\r\n\r\nexport function makeColumnLayout(barSeries) {\r\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\r\n  var seriesInfoList = [];\r\n  each(barSeries, function (seriesModel) {\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    var axisExtent = baseAxis.getExtent();\r\n    var bandWidth;\r\n\r\n    if (baseAxis.type === 'category') {\r\n      bandWidth = baseAxis.getBandWidth();\r\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\r\n      var key = baseAxis.dim + '_' + baseAxis.index;\r\n      var minGap = axisMinGaps[key];\r\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\r\n      var scale = baseAxis.scale.getExtent();\r\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\r\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\r\n    } else {\r\n      var data = seriesModel.getData();\r\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\r\n    }\r\n\r\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\r\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\r\n    var barMinWidth = parsePercent( // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\r\n    // the auto-calculated bar width might be less than 0.5 / 1.\r\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\r\n    var barGap = seriesModel.get('barGap');\r\n    var barCategoryGap = seriesModel.get('barCategoryGap');\r\n    seriesInfoList.push({\r\n      bandWidth: bandWidth,\r\n      barWidth: barWidth,\r\n      barMaxWidth: barMaxWidth,\r\n      barMinWidth: barMinWidth,\r\n      barGap: barGap,\r\n      barCategoryGap: barCategoryGap,\r\n      axisKey: getAxisKey(baseAxis),\r\n      stackId: getSeriesStackId(seriesModel)\r\n    });\r\n  });\r\n  return doCalBarWidthAndOffset(seriesInfoList);\r\n}\r\n\r\nfunction doCalBarWidthAndOffset(seriesInfoList) {\r\n  // Columns info on each category axis. Key is cartesian name\r\n  var columnsMap = {};\r\n  each(seriesInfoList, function (seriesInfo, idx) {\r\n    var axisKey = seriesInfo.axisKey;\r\n    var bandWidth = seriesInfo.bandWidth;\r\n    var columnsOnAxis = columnsMap[axisKey] || {\r\n      bandWidth: bandWidth,\r\n      remainedWidth: bandWidth,\r\n      autoWidthCount: 0,\r\n      categoryGap: null,\r\n      gap: '20%',\r\n      stacks: {}\r\n    };\r\n    var stacks = columnsOnAxis.stacks;\r\n    columnsMap[axisKey] = columnsOnAxis;\r\n    var stackId = seriesInfo.stackId;\r\n\r\n    if (!stacks[stackId]) {\r\n      columnsOnAxis.autoWidthCount++;\r\n    }\r\n\r\n    stacks[stackId] = stacks[stackId] || {\r\n      width: 0,\r\n      maxWidth: 0\r\n    }; // Caution: In a single coordinate system, these barGrid attributes\r\n    // will be shared by series. Consider that they have default values,\r\n    // only the attributes set on the last series will work.\r\n    // Do not change this fact unless there will be a break change.\r\n\r\n    var barWidth = seriesInfo.barWidth;\r\n\r\n    if (barWidth && !stacks[stackId].width) {\r\n      // See #6312, do not restrict width.\r\n      stacks[stackId].width = barWidth;\r\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\r\n      columnsOnAxis.remainedWidth -= barWidth;\r\n    }\r\n\r\n    var barMaxWidth = seriesInfo.barMaxWidth;\r\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\r\n    var barMinWidth = seriesInfo.barMinWidth;\r\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\r\n    var barGap = seriesInfo.barGap;\r\n    barGap != null && (columnsOnAxis.gap = barGap);\r\n    var barCategoryGap = seriesInfo.barCategoryGap;\r\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\r\n  });\r\n  var result = {};\r\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\r\n    result[coordSysName] = {};\r\n    var stacks = columnsOnAxis.stacks;\r\n    var bandWidth = columnsOnAxis.bandWidth;\r\n    var categoryGapPercent = columnsOnAxis.categoryGap;\r\n\r\n    if (categoryGapPercent == null) {\r\n      var columnCount = keys(stacks).length; // More columns in one group\r\n      // the spaces between group is smaller. Or the column will be too thin.\r\n\r\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\r\n    }\r\n\r\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\r\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\r\n    var remainedWidth = columnsOnAxis.remainedWidth;\r\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\r\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\r\n\r\n    each(stacks, function (column) {\r\n      var maxWidth = column.maxWidth;\r\n      var minWidth = column.minWidth;\r\n\r\n      if (!column.width) {\r\n        var finalWidth = autoWidth;\r\n\r\n        if (maxWidth && maxWidth < finalWidth) {\r\n          finalWidth = Math.min(maxWidth, remainedWidth);\r\n        } // `minWidth` has higher priority. `minWidth` decide that whether the\r\n        // bar is able to be visible. So `minWidth` should not be restricted\r\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\r\n        // the extreme cases for `value` axis, bars are allowed to overlap\r\n        // with each other if `minWidth` specified.\r\n\r\n\r\n        if (minWidth && minWidth > finalWidth) {\r\n          finalWidth = minWidth;\r\n        }\r\n\r\n        if (finalWidth !== autoWidth) {\r\n          column.width = finalWidth;\r\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n          autoWidthCount--;\r\n        }\r\n      } else {\r\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\r\n        // CSS does. Because barWidth can be a percent value, where\r\n        // `barMaxWidth` can be used to restrict the final width.\r\n        var finalWidth = column.width;\r\n\r\n        if (maxWidth) {\r\n          finalWidth = Math.min(finalWidth, maxWidth);\r\n        } // `minWidth` has higher priority, as described above\r\n\r\n\r\n        if (minWidth) {\r\n          finalWidth = Math.max(finalWidth, minWidth);\r\n        }\r\n\r\n        column.width = finalWidth;\r\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n        autoWidthCount--;\r\n      }\r\n    }); // Recalculate width again\r\n\r\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n    autoWidth = Math.max(autoWidth, 0);\r\n    var widthSum = 0;\r\n    var lastColumn;\r\n    each(stacks, function (column, idx) {\r\n      if (!column.width) {\r\n        column.width = autoWidth;\r\n      }\r\n\r\n      lastColumn = column;\r\n      widthSum += column.width * (1 + barGapPercent);\r\n    });\r\n\r\n    if (lastColumn) {\r\n      widthSum -= lastColumn.width * barGapPercent;\r\n    }\r\n\r\n    var offset = -widthSum / 2;\r\n    each(stacks, function (column, stackId) {\r\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\r\n        bandWidth: bandWidth,\r\n        offset: offset,\r\n        width: column.width\r\n      };\r\n      offset += column.width * (1 + barGapPercent);\r\n    });\r\n  });\r\n  return result;\r\n}\r\n\r\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\r\n  if (barWidthAndOffset && axis) {\r\n    var result = barWidthAndOffset[getAxisKey(axis)];\r\n\r\n    if (result != null && seriesModel != null) {\r\n      return result[getSeriesStackId(seriesModel)];\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport { retrieveColumnLayout };\r\nexport function layout(seriesType, ecModel) {\r\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\r\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\r\n  each(seriesModels, function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    var stackId = getSeriesStackId(seriesModel);\r\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\r\n    var columnOffset = columnLayoutInfo.offset;\r\n    var columnWidth = columnLayoutInfo.width;\r\n    data.setLayout({\r\n      bandWidth: columnLayoutInfo.bandWidth,\r\n      offset: columnOffset,\r\n      size: columnWidth\r\n    });\r\n  });\r\n} // TODO: Do not support stack in large mode yet.\r\n\r\nexport function createProgressiveLayout(seriesType) {\r\n  return {\r\n    seriesType: seriesType,\r\n    plan: createRenderPlanner(),\r\n    reset: function (seriesModel) {\r\n      if (!isOnCartesian(seriesModel)) {\r\n        return;\r\n      }\r\n\r\n      var data = seriesModel.getData();\r\n      var cartesian = seriesModel.coordinateSystem;\r\n      var baseAxis = cartesian.getBaseAxis();\r\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\r\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\r\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\r\n      var drawBackground = seriesModel.get('showBackground', true);\r\n      var valueDim = data.mapDimension(valueAxis.dim);\r\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\r\n      var isValueAxisH = valueAxis.isHorizontal();\r\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\r\n      var isLarge = isInLargeMode(seriesModel);\r\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\r\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim); // Layout info.\r\n\r\n      var columnWidth = data.getLayout('size');\r\n      var columnOffset = data.getLayout('offset');\r\n      return {\r\n        progress: function (params, data) {\r\n          var count = params.count;\r\n          var largePoints = isLarge && createFloat32Array(count * 3);\r\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\r\n          var largeDataIndices = isLarge && createFloat32Array(count);\r\n          var coordLayout = cartesian.master.getRect();\r\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\r\n          var dataIndex;\r\n          var store = data.getStore();\r\n          var idxOffset = 0;\r\n\r\n          while ((dataIndex = params.next()) != null) {\r\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\r\n            var baseValue = store.get(baseDimIdx, dataIndex);\r\n            var baseCoord = valueAxisStart;\r\n            var startValue = void 0; // Because of the barMinHeight, we can not use the value in\r\n            // stackResultDimension directly.\r\n\r\n            if (stacked) {\r\n              startValue = +value - store.get(valueDimIdx, dataIndex);\r\n            }\r\n\r\n            var x = void 0;\r\n            var y = void 0;\r\n            var width = void 0;\r\n            var height = void 0;\r\n\r\n            if (isValueAxisH) {\r\n              var coord = cartesian.dataToPoint([value, baseValue]);\r\n\r\n              if (stacked) {\r\n                var startCoord = cartesian.dataToPoint([startValue, baseValue]);\r\n                baseCoord = startCoord[0];\r\n              }\r\n\r\n              x = baseCoord;\r\n              y = coord[1] + columnOffset;\r\n              width = coord[0] - baseCoord;\r\n              height = columnWidth;\r\n\r\n              if (Math.abs(width) < barMinHeight) {\r\n                width = (width < 0 ? -1 : 1) * barMinHeight;\r\n              }\r\n            } else {\r\n              var coord = cartesian.dataToPoint([baseValue, value]);\r\n\r\n              if (stacked) {\r\n                var startCoord = cartesian.dataToPoint([baseValue, startValue]);\r\n                baseCoord = startCoord[1];\r\n              }\r\n\r\n              x = coord[0] + columnOffset;\r\n              y = baseCoord;\r\n              width = columnWidth;\r\n              height = coord[1] - baseCoord;\r\n\r\n              if (Math.abs(height) < barMinHeight) {\r\n                // Include zero to has a positive bar\r\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\r\n              }\r\n            }\r\n\r\n            if (!isLarge) {\r\n              data.setItemLayout(dataIndex, {\r\n                x: x,\r\n                y: y,\r\n                width: width,\r\n                height: height\r\n              });\r\n            } else {\r\n              largePoints[idxOffset] = x;\r\n              largePoints[idxOffset + 1] = y;\r\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\r\n\r\n              if (largeBackgroundPoints) {\r\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\r\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\r\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\r\n              }\r\n\r\n              largeDataIndices[dataIndex] = dataIndex;\r\n            }\r\n\r\n            idxOffset += 3;\r\n          }\r\n\r\n          if (isLarge) {\r\n            data.setLayout({\r\n              largePoints: largePoints,\r\n              largeDataIndices: largeDataIndices,\r\n              largeBackgroundPoints: largeBackgroundPoints,\r\n              valueAxisHorizontal: isValueAxisH\r\n            });\r\n          }\r\n        }\r\n      };\r\n    }\r\n  };\r\n}\r\n\r\nfunction isOnCartesian(seriesModel) {\r\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\r\n}\r\n\r\nfunction isInLargeMode(seriesModel) {\r\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\r\n} // See cases in `test/bar-start.html` and `#7412`, `#8747`.\r\n\r\n\r\nfunction getValueAxisStart(baseAxis, valueAxis) {\r\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as clazzUtil from '../util/clazz.js';\r\n\r\nvar Scale =\r\n/** @class */\r\nfunction () {\r\n  function Scale(setting) {\r\n    this._setting = setting || {};\r\n    this._extent = [Infinity, -Infinity];\r\n  }\r\n\r\n  Scale.prototype.getSetting = function (name) {\r\n    return this._setting[name];\r\n  };\r\n  /**\r\n   * Set extent from data\r\n   */\r\n\r\n\r\n  Scale.prototype.unionExtent = function (other) {\r\n    var extent = this._extent;\r\n    other[0] < extent[0] && (extent[0] = other[0]);\r\n    other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\r\n    // this.setExtent(extent[0], extent[1]);\r\n  };\r\n  /**\r\n   * Set extent from data\r\n   */\r\n\r\n\r\n  Scale.prototype.unionExtentFromData = function (data, dim) {\r\n    this.unionExtent(data.getApproximateExtent(dim));\r\n  };\r\n  /**\r\n   * Get extent\r\n   *\r\n   * Extent is always in increase order.\r\n   */\r\n\r\n\r\n  Scale.prototype.getExtent = function () {\r\n    return this._extent.slice();\r\n  };\r\n  /**\r\n   * Set extent\r\n   */\r\n\r\n\r\n  Scale.prototype.setExtent = function (start, end) {\r\n    var thisExtent = this._extent;\r\n\r\n    if (!isNaN(start)) {\r\n      thisExtent[0] = start;\r\n    }\r\n\r\n    if (!isNaN(end)) {\r\n      thisExtent[1] = end;\r\n    }\r\n  };\r\n  /**\r\n   * If value is in extent range\r\n   */\r\n\r\n\r\n  Scale.prototype.isInExtentRange = function (value) {\r\n    return this._extent[0] <= value && this._extent[1] >= value;\r\n  };\r\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\r\n\r\n\r\n  Scale.prototype.isBlank = function () {\r\n    return this._isBlank;\r\n  };\r\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\r\n\r\n\r\n  Scale.prototype.setBlank = function (isBlank) {\r\n    this._isBlank = isBlank;\r\n  };\r\n\r\n  return Scale;\r\n}();\r\n\r\nclazzUtil.enableClassManagement(Scale);\r\nexport default Scale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\r\nvar uidBase = 0;\r\n\r\nvar OrdinalMeta =\r\n/** @class */\r\nfunction () {\r\n  function OrdinalMeta(opt) {\r\n    this.categories = opt.categories || [];\r\n    this._needCollect = opt.needCollect;\r\n    this._deduplication = opt.deduplication;\r\n    this.uid = ++uidBase;\r\n  }\r\n\r\n  OrdinalMeta.createByAxisModel = function (axisModel) {\r\n    var option = axisModel.option;\r\n    var data = option.data;\r\n    var categories = data && map(data, getName);\r\n    return new OrdinalMeta({\r\n      categories: categories,\r\n      needCollect: !categories,\r\n      // deduplication is default in axis.\r\n      deduplication: option.dedplication !== false\r\n    });\r\n  };\r\n\r\n  ;\r\n\r\n  OrdinalMeta.prototype.getOrdinal = function (category) {\r\n    // @ts-ignore\r\n    return this._getOrCreateMap().get(category);\r\n  };\r\n  /**\r\n   * @return The ordinal. If not found, return NaN.\r\n   */\r\n\r\n\r\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\r\n    var index;\r\n    var needCollect = this._needCollect; // The value of category dim can be the index of the given category set.\r\n    // This feature is only supported when !needCollect, because we should\r\n    // consider a common case: a value is 2017, which is a number but is\r\n    // expected to be tread as a category. This case usually happen in dataset,\r\n    // where it happent to be no need of the index feature.\r\n\r\n    if (!isString(category) && !needCollect) {\r\n      return category;\r\n    } // Optimize for the scenario:\r\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\r\n    // data has been ensured not duplicate and is large data.\r\n    // Notice, if a dataset dimension provide categroies, usually echarts\r\n    // should remove duplication except user tell echarts dont do that\r\n    // (set axis.deduplication = false), because echarts do not know whether\r\n    // the values in the category dimension has duplication (consider the\r\n    // parallel-aqi example)\r\n\r\n\r\n    if (needCollect && !this._deduplication) {\r\n      index = this.categories.length;\r\n      this.categories[index] = category;\r\n      return index;\r\n    }\r\n\r\n    var map = this._getOrCreateMap(); // @ts-ignore\r\n\r\n\r\n    index = map.get(category);\r\n\r\n    if (index == null) {\r\n      if (needCollect) {\r\n        index = this.categories.length;\r\n        this.categories[index] = category; // @ts-ignore\r\n\r\n        map.set(category, index);\r\n      } else {\r\n        index = NaN;\r\n      }\r\n    }\r\n\r\n    return index;\r\n  }; // Consider big data, do not create map until needed.\r\n\r\n\r\n  OrdinalMeta.prototype._getOrCreateMap = function () {\r\n    return this._map || (this._map = createHashMap(this.categories));\r\n  };\r\n\r\n  return OrdinalMeta;\r\n}();\r\n\r\nfunction getName(obj) {\r\n  if (isObject(obj) && obj.value != null) {\r\n    return obj.value;\r\n  } else {\r\n    return obj + '';\r\n  }\r\n}\r\n\r\nexport default OrdinalMeta;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\r\nexport function isValueNice(val) {\r\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\r\n  var f = Math.abs(val / exp10);\r\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\r\n}\r\nexport function isIntervalOrLogScale(scale) {\r\n  return scale.type === 'interval' || scale.type === 'log';\r\n}\r\n/**\r\n * @param extent Both extent[0] and extent[1] should be valid number.\r\n *               Should be extent[0] < extent[1].\r\n * @param splitNumber splitNumber should be >= 1.\r\n */\r\n\r\nexport function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\r\n  var result = {};\r\n  var span = extent[1] - extent[0];\r\n  var interval = result.interval = nice(span / splitNumber, true);\r\n\r\n  if (minInterval != null && interval < minInterval) {\r\n    interval = result.interval = minInterval;\r\n  }\r\n\r\n  if (maxInterval != null && interval > maxInterval) {\r\n    interval = result.interval = maxInterval;\r\n  } // Tow more digital for tick.\r\n\r\n\r\n  var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\r\n\r\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\r\n  fixExtent(niceTickExtent, extent);\r\n  return result;\r\n}\r\nexport function increaseInterval(interval) {\r\n  var exp10 = Math.pow(10, quantityExponent(interval)); // Increase interval\r\n\r\n  var f = interval / exp10;\r\n\r\n  if (!f) {\r\n    f = 1;\r\n  } else if (f === 2) {\r\n    f = 3;\r\n  } else if (f === 3) {\r\n    f = 5;\r\n  } else {\r\n    // f is 1 or 5\r\n    f *= 2;\r\n  }\r\n\r\n  return round(f * exp10);\r\n}\r\n/**\r\n * @return interval precision\r\n */\r\n\r\nexport function getIntervalPrecision(interval) {\r\n  // Tow more digital for tick.\r\n  return getPrecision(interval) + 2;\r\n}\r\n\r\nfunction clamp(niceTickExtent, idx, extent) {\r\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\r\n} // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\r\n\r\n\r\nexport function fixExtent(niceTickExtent, extent) {\r\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\r\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\r\n  clamp(niceTickExtent, 0, extent);\r\n  clamp(niceTickExtent, 1, extent);\r\n\r\n  if (niceTickExtent[0] > niceTickExtent[1]) {\r\n    niceTickExtent[0] = niceTickExtent[1];\r\n  }\r\n}\r\nexport function contain(val, extent) {\r\n  return val >= extent[0] && val <= extent[1];\r\n}\r\nexport function normalize(val, extent) {\r\n  if (extent[1] === extent[0]) {\r\n    return 0.5;\r\n  }\r\n\r\n  return (val - extent[0]) / (extent[1] - extent[0]);\r\n}\r\nexport function scale(val, extent) {\r\n  return val * (extent[1] - extent[0]) + extent[0];\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * Linear continuous scale\r\n * http://en.wikipedia.org/wiki/Level_of_measurement\r\n */\r\n// FIXME only one data\r\n\r\nimport Scale from './Scale.js';\r\nimport OrdinalMeta from '../data/OrdinalMeta.js';\r\nimport * as scaleHelper from './helper.js';\r\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\r\n\r\nvar OrdinalScale =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(OrdinalScale, _super);\r\n\r\n  function OrdinalScale(setting) {\r\n    var _this = _super.call(this, setting) || this;\r\n\r\n    _this.type = 'ordinal';\r\n\r\n    var ordinalMeta = _this.getSetting('ordinalMeta'); // Caution: Should not use instanceof, consider ec-extensions using\r\n    // import approach to get OrdinalMeta class.\r\n\r\n\r\n    if (!ordinalMeta) {\r\n      ordinalMeta = new OrdinalMeta({});\r\n    }\r\n\r\n    if (isArray(ordinalMeta)) {\r\n      ordinalMeta = new OrdinalMeta({\r\n        categories: map(ordinalMeta, function (item) {\r\n          return isObject(item) ? item.value : item;\r\n        })\r\n      });\r\n    }\r\n\r\n    _this._ordinalMeta = ordinalMeta;\r\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\r\n    return _this;\r\n  }\r\n\r\n  OrdinalScale.prototype.parse = function (val) {\r\n    // Caution: Math.round(null) will return `0` rather than `NaN`\r\n    if (val == null) {\r\n      return NaN;\r\n    }\r\n\r\n    return isString(val) ? this._ordinalMeta.getOrdinal(val) // val might be float.\r\n    : Math.round(val);\r\n  };\r\n\r\n  OrdinalScale.prototype.contain = function (rank) {\r\n    rank = this.parse(rank);\r\n    return scaleHelper.contain(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\r\n  };\r\n  /**\r\n   * Normalize given rank or name to linear [0, 1]\r\n   * @param val raw ordinal number.\r\n   * @return normalized value in [0, 1].\r\n   */\r\n\r\n\r\n  OrdinalScale.prototype.normalize = function (val) {\r\n    val = this._getTickNumber(this.parse(val));\r\n    return scaleHelper.normalize(val, this._extent);\r\n  };\r\n  /**\r\n   * @param val normalized value in [0, 1].\r\n   * @return raw ordinal number.\r\n   */\r\n\r\n\r\n  OrdinalScale.prototype.scale = function (val) {\r\n    val = Math.round(scaleHelper.scale(val, this._extent));\r\n    return this.getRawOrdinalNumber(val);\r\n  };\r\n\r\n  OrdinalScale.prototype.getTicks = function () {\r\n    var ticks = [];\r\n    var extent = this._extent;\r\n    var rank = extent[0];\r\n\r\n    while (rank <= extent[1]) {\r\n      ticks.push({\r\n        value: rank\r\n      });\r\n      rank++;\r\n    }\r\n\r\n    return ticks;\r\n  };\r\n\r\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\r\n    // Not support.\r\n    return;\r\n  };\r\n  /**\r\n   * @see `Ordinal['_ordinalNumbersByTick']`\r\n   */\r\n\r\n\r\n  OrdinalScale.prototype.setSortInfo = function (info) {\r\n    if (info == null) {\r\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\r\n      return;\r\n    }\r\n\r\n    var infoOrdinalNumbers = info.ordinalNumbers;\r\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\r\n    var ticksByOrdinal = this._ticksByOrdinalNumber = []; // Unnecessary support negative tick in `realtimeSort`.\r\n\r\n    var tickNum = 0;\r\n    var allCategoryLen = this._ordinalMeta.categories.length;\r\n\r\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\r\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\r\n      ordinalsByTick[tickNum] = ordinalNumber;\r\n      ticksByOrdinal[ordinalNumber] = tickNum;\r\n    } // Handle that `series.data` only covers part of the `axis.category.data`.\r\n\r\n\r\n    var unusedOrdinal = 0;\r\n\r\n    for (; tickNum < allCategoryLen; ++tickNum) {\r\n      while (ticksByOrdinal[unusedOrdinal] != null) {\r\n        unusedOrdinal++;\r\n      }\r\n\r\n      ;\r\n      ordinalsByTick.push(unusedOrdinal);\r\n      ticksByOrdinal[unusedOrdinal] = tickNum;\r\n    }\r\n  };\r\n\r\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\r\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber; // also support ordinal out of range of `ordinalMeta.categories.length`,\r\n    // where ordinal numbers are used as tick value directly.\r\n\r\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\r\n  };\r\n  /**\r\n   * @usage\r\n   * ```js\r\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\r\n   *\r\n   * // case0\r\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\r\n   * // case1\r\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\r\n   * // case2\r\n   * const coord = axis.dataToCoord(ordinalNumber);\r\n   * ```\r\n   *\r\n   * @param {OrdinalNumber} tickNumber index of display\r\n   */\r\n\r\n\r\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\r\n    var ordinalNumbersByTick = this._ordinalNumbersByTick; // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\r\n    // where ordinal numbers are used as tick value directly.\r\n\r\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\r\n  };\r\n  /**\r\n   * Get item on tick\r\n   */\r\n\r\n\r\n  OrdinalScale.prototype.getLabel = function (tick) {\r\n    if (!this.isBlank()) {\r\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\r\n      var cateogry = this._ordinalMeta.categories[ordinalNumber]; // Note that if no data, ordinalMeta.categories is an empty array.\r\n      // Return empty if it's not exist.\r\n\r\n      return cateogry == null ? '' : cateogry + '';\r\n    }\r\n  };\r\n\r\n  OrdinalScale.prototype.count = function () {\r\n    return this._extent[1] - this._extent[0] + 1;\r\n  };\r\n\r\n  OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\r\n    this.unionExtent(data.getApproximateExtent(dim));\r\n  };\r\n  /**\r\n   * @override\r\n   * If value is in extent range\r\n   */\r\n\r\n\r\n  OrdinalScale.prototype.isInExtentRange = function (value) {\r\n    value = this._getTickNumber(value);\r\n    return this._extent[0] <= value && this._extent[1] >= value;\r\n  };\r\n\r\n  OrdinalScale.prototype.getOrdinalMeta = function () {\r\n    return this._ordinalMeta;\r\n  };\r\n\r\n  OrdinalScale.prototype.calcNiceTicks = function () {};\r\n\r\n  OrdinalScale.prototype.calcNiceExtent = function () {};\r\n\r\n  OrdinalScale.type = 'ordinal';\r\n  return OrdinalScale;\r\n}(Scale);\r\n\r\nScale.registerClass(OrdinalScale);\r\nexport default OrdinalScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as numberUtil from '../util/number.js';\r\nimport * as formatUtil from '../util/format.js';\r\nimport Scale from './Scale.js';\r\nimport * as helper from './helper.js';\r\nvar roundNumber = numberUtil.round;\r\n\r\nvar IntervalScale =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(IntervalScale, _super);\r\n\r\n  function IntervalScale() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = 'interval'; // Step is calculated in adjustExtent.\r\n\r\n    _this._interval = 0;\r\n    _this._intervalPrecision = 2;\r\n    return _this;\r\n  }\r\n\r\n  IntervalScale.prototype.parse = function (val) {\r\n    return val;\r\n  };\r\n\r\n  IntervalScale.prototype.contain = function (val) {\r\n    return helper.contain(val, this._extent);\r\n  };\r\n\r\n  IntervalScale.prototype.normalize = function (val) {\r\n    return helper.normalize(val, this._extent);\r\n  };\r\n\r\n  IntervalScale.prototype.scale = function (val) {\r\n    return helper.scale(val, this._extent);\r\n  };\r\n\r\n  IntervalScale.prototype.setExtent = function (start, end) {\r\n    var thisExtent = this._extent; // start,end may be a Number like '25',so...\r\n\r\n    if (!isNaN(start)) {\r\n      thisExtent[0] = parseFloat(start);\r\n    }\r\n\r\n    if (!isNaN(end)) {\r\n      thisExtent[1] = parseFloat(end);\r\n    }\r\n  };\r\n\r\n  IntervalScale.prototype.unionExtent = function (other) {\r\n    var extent = this._extent;\r\n    other[0] < extent[0] && (extent[0] = other[0]);\r\n    other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\r\n\r\n    this.setExtent(extent[0], extent[1]);\r\n  };\r\n\r\n  IntervalScale.prototype.getInterval = function () {\r\n    return this._interval;\r\n  };\r\n\r\n  IntervalScale.prototype.setInterval = function (interval) {\r\n    this._interval = interval; // Dropped auto calculated niceExtent and use user-set extent.\r\n    // We assume user wants to set both interval, min, max to get a better result.\r\n\r\n    this._niceExtent = this._extent.slice();\r\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\r\n  };\r\n  /**\r\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\r\n   */\r\n\r\n\r\n  IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\r\n    var interval = this._interval;\r\n    var extent = this._extent;\r\n    var niceTickExtent = this._niceExtent;\r\n    var intervalPrecision = this._intervalPrecision;\r\n    var ticks = []; // If interval is 0, return [];\r\n\r\n    if (!interval) {\r\n      return ticks;\r\n    } // Consider this case: using dataZoom toolbox, zoom and zoom.\r\n\r\n\r\n    var safeLimit = 10000;\r\n\r\n    if (extent[0] < niceTickExtent[0]) {\r\n      if (expandToNicedExtent) {\r\n        ticks.push({\r\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\r\n        });\r\n      } else {\r\n        ticks.push({\r\n          value: extent[0]\r\n        });\r\n      }\r\n    }\r\n\r\n    var tick = niceTickExtent[0];\r\n\r\n    while (tick <= niceTickExtent[1]) {\r\n      ticks.push({\r\n        value: tick\r\n      }); // Avoid rounding error\r\n\r\n      tick = roundNumber(tick + interval, intervalPrecision);\r\n\r\n      if (tick === ticks[ticks.length - 1].value) {\r\n        // Consider out of safe float point, e.g.,\r\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\r\n        break;\r\n      }\r\n\r\n      if (ticks.length > safeLimit) {\r\n        return [];\r\n      }\r\n    } // Consider this case: the last item of ticks is smaller\r\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\r\n\r\n\r\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\r\n\r\n    if (extent[1] > lastNiceTick) {\r\n      if (expandToNicedExtent) {\r\n        ticks.push({\r\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\r\n        });\r\n      } else {\r\n        ticks.push({\r\n          value: extent[1]\r\n        });\r\n      }\r\n    }\r\n\r\n    return ticks;\r\n  };\r\n\r\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\r\n    var ticks = this.getTicks(true);\r\n    var minorTicks = [];\r\n    var extent = this.getExtent();\r\n\r\n    for (var i = 1; i < ticks.length; i++) {\r\n      var nextTick = ticks[i];\r\n      var prevTick = ticks[i - 1];\r\n      var count = 0;\r\n      var minorTicksGroup = [];\r\n      var interval = nextTick.value - prevTick.value;\r\n      var minorInterval = interval / splitNumber;\r\n\r\n      while (count < splitNumber - 1) {\r\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\r\n\r\n        if (minorTick > extent[0] && minorTick < extent[1]) {\r\n          minorTicksGroup.push(minorTick);\r\n        }\r\n\r\n        count++;\r\n      }\r\n\r\n      minorTicks.push(minorTicksGroup);\r\n    }\r\n\r\n    return minorTicks;\r\n  };\r\n  /**\r\n   * @param opt.precision If 'auto', use nice presision.\r\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\r\n   */\r\n\r\n\r\n  IntervalScale.prototype.getLabel = function (data, opt) {\r\n    if (data == null) {\r\n      return '';\r\n    }\r\n\r\n    var precision = opt && opt.precision;\r\n\r\n    if (precision == null) {\r\n      precision = numberUtil.getPrecision(data.value) || 0;\r\n    } else if (precision === 'auto') {\r\n      // Should be more precise then tick.\r\n      precision = this._intervalPrecision;\r\n    } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\r\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\r\n\r\n\r\n    var dataNum = roundNumber(data.value, precision, true);\r\n    return formatUtil.addCommas(dataNum);\r\n  };\r\n  /**\r\n   * @param splitNumber By default `5`.\r\n   */\r\n\r\n\r\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\r\n    splitNumber = splitNumber || 5;\r\n    var extent = this._extent;\r\n    var span = extent[1] - extent[0];\r\n\r\n    if (!isFinite(span)) {\r\n      return;\r\n    } // User may set axis min 0 and data are all negative\r\n    // FIXME If it needs to reverse ?\r\n\r\n\r\n    if (span < 0) {\r\n      span = -span;\r\n      extent.reverse();\r\n    }\r\n\r\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\r\n    this._intervalPrecision = result.intervalPrecision;\r\n    this._interval = result.interval;\r\n    this._niceExtent = result.niceTickExtent;\r\n  };\r\n\r\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\r\n    var extent = this._extent; // If extent start and end are same, expand them\r\n\r\n    if (extent[0] === extent[1]) {\r\n      if (extent[0] !== 0) {\r\n        // Expand extent\r\n        // Note that extents can be both negative. See #13154\r\n        var expandSize = Math.abs(extent[0]); // In the fowllowing case\r\n        //      Axis has been fixed max 100\r\n        //      Plus data are all 100 and axis extent are [100, 100].\r\n        // Extend to the both side will cause expanded max is larger than fixed max.\r\n        // So only expand to the smaller side.\r\n\r\n        if (!opt.fixMax) {\r\n          extent[1] += expandSize / 2;\r\n          extent[0] -= expandSize / 2;\r\n        } else {\r\n          extent[0] -= expandSize / 2;\r\n        }\r\n      } else {\r\n        extent[1] = 1;\r\n      }\r\n    }\r\n\r\n    var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\r\n\r\n    if (!isFinite(span)) {\r\n      extent[0] = 0;\r\n      extent[1] = 1;\r\n    }\r\n\r\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // let extent = this._extent;\r\n\r\n    var interval = this._interval;\r\n\r\n    if (!opt.fixMin) {\r\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\r\n    }\r\n\r\n    if (!opt.fixMax) {\r\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\r\n    }\r\n  };\r\n\r\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\r\n    this._niceExtent = [min, max];\r\n  };\r\n\r\n  IntervalScale.type = 'interval';\r\n  return IntervalScale;\r\n}(Scale);\r\n\r\nScale.registerClass(IntervalScale);\r\nexport default IntervalScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\r\n// [About UTC and local time zone]:\r\n// In most cases, `number.parseDate` will treat input data string as local time\r\n// (except time zone is specified in time string). And `format.formateTime` returns\r\n// local time by default. option.useUTC is false by default. This design has\r\n// considered these common cases:\r\n// (1) Time that is persistent in server is in UTC, but it is needed to be displayed\r\n// in local time by default.\r\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\r\n// as its original time, without any time difference.\r\n\r\nimport * as numberUtil from '../util/number.js';\r\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time.js';\r\nimport * as scaleHelper from './helper.js';\r\nimport IntervalScale from './Interval.js';\r\nimport Scale from './Scale.js';\r\nimport { warn } from '../util/log.js';\r\nimport { filter, isNumber, map } from 'zrender/lib/core/util.js'; // FIXME 公用？\r\n\r\nvar bisect = function (a, x, lo, hi) {\r\n  while (lo < hi) {\r\n    var mid = lo + hi >>> 1;\r\n\r\n    if (a[mid][1] < x) {\r\n      lo = mid + 1;\r\n    } else {\r\n      hi = mid;\r\n    }\r\n  }\r\n\r\n  return lo;\r\n};\r\n\r\nvar TimeScale =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TimeScale, _super);\r\n\r\n  function TimeScale(settings) {\r\n    var _this = _super.call(this, settings) || this;\r\n\r\n    _this.type = 'time';\r\n    return _this;\r\n  }\r\n  /**\r\n   * Get label is mainly for other components like dataZoom, tooltip.\r\n   */\r\n\r\n\r\n  TimeScale.prototype.getLabel = function (tick) {\r\n    var useUTC = this.getSetting('useUTC');\r\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\r\n  };\r\n\r\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\r\n    var isUTC = this.getSetting('useUTC');\r\n    var lang = this.getSetting('locale');\r\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  TimeScale.prototype.getTicks = function () {\r\n    var interval = this._interval;\r\n    var extent = this._extent;\r\n    var ticks = []; // If interval is 0, return [];\r\n\r\n    if (!interval) {\r\n      return ticks;\r\n    }\r\n\r\n    ticks.push({\r\n      value: extent[0],\r\n      level: 0\r\n    });\r\n    var useUTC = this.getSetting('useUTC');\r\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\r\n    ticks = ticks.concat(innerTicks);\r\n    ticks.push({\r\n      value: extent[1],\r\n      level: 0\r\n    });\r\n    return ticks;\r\n  };\r\n\r\n  TimeScale.prototype.calcNiceExtent = function (opt) {\r\n    var extent = this._extent; // If extent start and end are same, expand them\r\n\r\n    if (extent[0] === extent[1]) {\r\n      // Expand extent\r\n      extent[0] -= ONE_DAY;\r\n      extent[1] += ONE_DAY;\r\n    } // If there are no data and extent are [Infinity, -Infinity]\r\n\r\n\r\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\r\n      var d = new Date();\r\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n      extent[0] = extent[1] - ONE_DAY;\r\n    }\r\n\r\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n  };\r\n\r\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\r\n    approxTickNum = approxTickNum || 10;\r\n    var extent = this._extent;\r\n    var span = extent[1] - extent[0];\r\n    this._approxInterval = span / approxTickNum;\r\n\r\n    if (minInterval != null && this._approxInterval < minInterval) {\r\n      this._approxInterval = minInterval;\r\n    }\r\n\r\n    if (maxInterval != null && this._approxInterval > maxInterval) {\r\n      this._approxInterval = maxInterval;\r\n    }\r\n\r\n    var scaleIntervalsLen = scaleIntervals.length;\r\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\r\n\r\n    this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\r\n    // We check one more level to avoid the ticks are to sparse in some case.\r\n\r\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\r\n  };\r\n\r\n  TimeScale.prototype.parse = function (val) {\r\n    // val might be float.\r\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\r\n  };\r\n\r\n  TimeScale.prototype.contain = function (val) {\r\n    return scaleHelper.contain(this.parse(val), this._extent);\r\n  };\r\n\r\n  TimeScale.prototype.normalize = function (val) {\r\n    return scaleHelper.normalize(this.parse(val), this._extent);\r\n  };\r\n\r\n  TimeScale.prototype.scale = function (val) {\r\n    return scaleHelper.scale(val, this._extent);\r\n  };\r\n\r\n  TimeScale.type = 'time';\r\n  return TimeScale;\r\n}(IntervalScale);\r\n/**\r\n * This implementation was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\r\n\r\n\r\nvar scaleIntervals = [// Format                           interval\r\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\r\n];\r\n\r\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\r\n  var dateA = numberUtil.parseDate(valueA);\r\n  var dateB = numberUtil.parseDate(valueB);\r\n\r\n  var isSame = function (unit) {\r\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\r\n  };\r\n\r\n  var isSameYear = function () {\r\n    return isSame('year');\r\n  }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\r\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\r\n\r\n\r\n  var isSameMonth = function () {\r\n    return isSameYear() && isSame('month');\r\n  };\r\n\r\n  var isSameDay = function () {\r\n    return isSameMonth() && isSame('day');\r\n  }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\r\n\r\n\r\n  var isSameHour = function () {\r\n    return isSameDay() && isSame('hour');\r\n  };\r\n\r\n  var isSameMinute = function () {\r\n    return isSameHour() && isSame('minute');\r\n  };\r\n\r\n  var isSameSecond = function () {\r\n    return isSameMinute() && isSame('second');\r\n  };\r\n\r\n  var isSameMilliSecond = function () {\r\n    return isSameSecond() && isSame('millisecond');\r\n  };\r\n\r\n  switch (unit) {\r\n    case 'year':\r\n      return isSameYear();\r\n\r\n    case 'month':\r\n      return isSameMonth();\r\n\r\n    case 'day':\r\n      return isSameDay();\r\n\r\n    case 'hour':\r\n      return isSameHour();\r\n\r\n    case 'minute':\r\n      return isSameMinute();\r\n\r\n    case 'second':\r\n      return isSameSecond();\r\n\r\n    case 'millisecond':\r\n      return isSameMilliSecond();\r\n  }\r\n} // const primaryUnitGetters = {\r\n//     year: fullYearGetterName(),\r\n//     month: monthGetterName(),\r\n//     day: dateGetterName(),\r\n//     hour: hoursGetterName(),\r\n//     minute: minutesGetterName(),\r\n//     second: secondsGetterName(),\r\n//     millisecond: millisecondsGetterName()\r\n// };\r\n// const primaryUnitUTCGetters = {\r\n//     year: fullYearGetterName(true),\r\n//     month: monthGetterName(true),\r\n//     day: dateGetterName(true),\r\n//     hour: hoursGetterName(true),\r\n//     minute: minutesGetterName(true),\r\n//     second: secondsGetterName(true),\r\n//     millisecond: millisecondsGetterName(true)\r\n// };\r\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\r\n//     step = step || 1;\r\n//     switch (getPrimaryTimeUnit(unitName)) {\r\n//         case 'year':\r\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'month':\r\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'day':\r\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'hour':\r\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'minute':\r\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'second':\r\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\r\n//             break;\r\n//         case 'millisecond':\r\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\r\n//             break;\r\n//     }\r\n//     return date.getTime();\r\n// }\r\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\r\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\r\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\r\n\r\n\r\nfunction getDateInterval(approxInterval, daysInMonth) {\r\n  approxInterval /= ONE_DAY;\r\n  return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick between two months.\r\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\r\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\r\n}\r\n\r\nfunction getMonthInterval(approxInterval) {\r\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\r\n  approxInterval /= APPROX_ONE_MONTH;\r\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\r\n}\r\n\r\nfunction getHourInterval(approxInterval) {\r\n  approxInterval /= ONE_HOUR;\r\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\r\n}\r\n\r\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\r\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\r\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\r\n}\r\n\r\nfunction getMillisecondsInterval(approxInterval) {\r\n  return numberUtil.nice(approxInterval, true);\r\n}\r\n\r\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\r\n  var outDate = new Date(date);\r\n\r\n  switch (getPrimaryTimeUnit(unitName)) {\r\n    case 'year':\r\n    case 'month':\r\n      outDate[monthSetterName(isUTC)](0);\r\n\r\n    case 'day':\r\n      outDate[dateSetterName(isUTC)](1);\r\n\r\n    case 'hour':\r\n      outDate[hoursSetterName(isUTC)](0);\r\n\r\n    case 'minute':\r\n      outDate[minutesSetterName(isUTC)](0);\r\n\r\n    case 'second':\r\n      outDate[secondsSetterName(isUTC)](0);\r\n      outDate[millisecondsSetterName(isUTC)](0);\r\n  }\r\n\r\n  return outDate.getTime();\r\n}\r\n\r\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\r\n  var safeLimit = 10000;\r\n  var unitNames = timeUnits;\r\n  var iter = 0;\r\n\r\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\r\n    var date = new Date(minTimestamp);\r\n    var dateTime = minTimestamp;\r\n    var d = date[getMethodName](); // if (isDate) {\r\n    //     d -= 1; // Starts with 0;   PENDING\r\n    // }\r\n\r\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\r\n      out.push({\r\n        value: dateTime\r\n      });\r\n      d += interval;\r\n      date[setMethodName](d);\r\n      dateTime = date.getTime();\r\n    } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\r\n\r\n\r\n    out.push({\r\n      value: dateTime,\r\n      notAdd: true\r\n    });\r\n  }\r\n\r\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\r\n    var newAddedTicks = [];\r\n    var isFirstLevel = !lastLevelTicks.length;\r\n\r\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\r\n      return;\r\n    }\r\n\r\n    if (isFirstLevel) {\r\n      lastLevelTicks = [{\r\n        // TODO Optimize. Not include so may ticks.\r\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\r\n      }, {\r\n        value: extent[1]\r\n      }];\r\n    }\r\n\r\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\r\n      var startTick = lastLevelTicks[i].value;\r\n      var endTick = lastLevelTicks[i + 1].value;\r\n\r\n      if (startTick === endTick) {\r\n        continue;\r\n      }\r\n\r\n      var interval = void 0;\r\n      var getterName = void 0;\r\n      var setterName = void 0;\r\n      var isDate = false;\r\n\r\n      switch (unitName) {\r\n        case 'year':\r\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\r\n          getterName = fullYearGetterName(isUTC);\r\n          setterName = fullYearSetterName(isUTC);\r\n          break;\r\n\r\n        case 'half-year':\r\n        case 'quarter':\r\n        case 'month':\r\n          interval = getMonthInterval(approxInterval);\r\n          getterName = monthGetterName(isUTC);\r\n          setterName = monthSetterName(isUTC);\r\n          break;\r\n\r\n        case 'week': // PENDING If week is added. Ignore day.\r\n\r\n        case 'half-week':\r\n        case 'day':\r\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\r\n\r\n          getterName = dateGetterName(isUTC);\r\n          setterName = dateSetterName(isUTC);\r\n          isDate = true;\r\n          break;\r\n\r\n        case 'half-day':\r\n        case 'quarter-day':\r\n        case 'hour':\r\n          interval = getHourInterval(approxInterval);\r\n          getterName = hoursGetterName(isUTC);\r\n          setterName = hoursSetterName(isUTC);\r\n          break;\r\n\r\n        case 'minute':\r\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\r\n          getterName = minutesGetterName(isUTC);\r\n          setterName = minutesSetterName(isUTC);\r\n          break;\r\n\r\n        case 'second':\r\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\r\n          getterName = secondsGetterName(isUTC);\r\n          setterName = secondsSetterName(isUTC);\r\n          break;\r\n\r\n        case 'millisecond':\r\n          interval = getMillisecondsInterval(approxInterval);\r\n          getterName = millisecondsGetterName(isUTC);\r\n          setterName = millisecondsSetterName(isUTC);\r\n          break;\r\n      }\r\n\r\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\r\n\r\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\r\n        // Add nearest years to the left extent.\r\n        levelTicks.unshift({\r\n          value: levelTicks[0].value - interval\r\n        });\r\n      }\r\n    }\r\n\r\n    for (var i = 0; i < newAddedTicks.length; i++) {\r\n      levelTicks.push(newAddedTicks[i]);\r\n    } // newAddedTicks.length && console.log(unitName, newAddedTicks);\r\n\r\n\r\n    return newAddedTicks;\r\n  }\r\n\r\n  var levelsTicks = [];\r\n  var currentLevelTicks = [];\r\n  var tickCount = 0;\r\n  var lastLevelTickCount = 0;\r\n\r\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\r\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\r\n\r\n    if (!isPrimaryTimeUnit(unitNames[i])) {\r\n      // TODO\r\n      continue;\r\n    }\r\n\r\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\r\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\r\n\r\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\r\n      if (currentLevelTicks.length) {\r\n        lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\r\n\r\n        currentLevelTicks.sort(function (a, b) {\r\n          return a.value - b.value;\r\n        });\r\n        var levelTicksRemoveDuplicated = [];\r\n\r\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\r\n          var tickValue = currentLevelTicks[i_1].value;\r\n\r\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\r\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\r\n\r\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\r\n              tickCount++;\r\n            }\r\n          }\r\n        }\r\n\r\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\r\n\r\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\r\n          break;\r\n        } // Only treat primary time unit as one level.\r\n\r\n\r\n        levelsTicks.push(levelTicksRemoveDuplicated);\r\n\r\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\r\n          break;\r\n        }\r\n      } // Reset if next unitName is primary\r\n\r\n\r\n      currentLevelTicks = [];\r\n    }\r\n  }\r\n\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (iter >= safeLimit) {\r\n      warn('Exceed safe limit.');\r\n    }\r\n  }\r\n\r\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\r\n    return filter(levelTicks, function (tick) {\r\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\r\n    });\r\n  }), function (levelTicks) {\r\n    return levelTicks.length > 0;\r\n  });\r\n  var ticks = [];\r\n  var maxLevel = levelsTicksInExtent.length - 1;\r\n\r\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\r\n    var levelTicks = levelsTicksInExtent[i];\r\n\r\n    for (var k = 0; k < levelTicks.length; ++k) {\r\n      ticks.push({\r\n        value: levelTicks[k].value,\r\n        level: maxLevel - i\r\n      });\r\n    }\r\n  }\r\n\r\n  ticks.sort(function (a, b) {\r\n    return a.value - b.value;\r\n  }); // Remove duplicates\r\n\r\n  var result = [];\r\n\r\n  for (var i = 0; i < ticks.length; ++i) {\r\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\r\n      result.push(ticks[i]);\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nScale.registerClass(TimeScale);\r\nexport default TimeScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport Scale from './Scale.js';\r\nimport * as numberUtil from '../util/number.js';\r\nimport * as scaleHelper from './helper.js'; // Use some method of IntervalScale\r\n\r\nimport IntervalScale from './Interval.js';\r\nvar scaleProto = Scale.prototype; // FIXME:TS refactor: not good to call it directly with `this`?\r\n\r\nvar intervalScaleProto = IntervalScale.prototype;\r\nvar roundingErrorFix = numberUtil.round;\r\nvar mathFloor = Math.floor;\r\nvar mathCeil = Math.ceil;\r\nvar mathPow = Math.pow;\r\nvar mathLog = Math.log;\r\n\r\nvar LogScale =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LogScale, _super);\r\n\r\n  function LogScale() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = 'log';\r\n    _this.base = 10;\r\n    _this._originalScale = new IntervalScale(); // FIXME:TS actually used by `IntervalScale`\r\n\r\n    _this._interval = 0;\r\n    return _this;\r\n  }\r\n  /**\r\n   * @param Whether expand the ticks to niced extent.\r\n   */\r\n\r\n\r\n  LogScale.prototype.getTicks = function (expandToNicedExtent) {\r\n    var originalScale = this._originalScale;\r\n    var extent = this._extent;\r\n    var originalExtent = originalScale.getExtent();\r\n    var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\r\n    return zrUtil.map(ticks, function (tick) {\r\n      var val = tick.value;\r\n      var powVal = numberUtil.round(mathPow(this.base, val)); // Fix #4158\r\n\r\n      powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\r\n      powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\r\n      return {\r\n        value: powVal\r\n      };\r\n    }, this);\r\n  };\r\n\r\n  LogScale.prototype.setExtent = function (start, end) {\r\n    var base = mathLog(this.base); // log(-Infinity) is NaN, so safe guard here\r\n\r\n    start = mathLog(Math.max(0, start)) / base;\r\n    end = mathLog(Math.max(0, end)) / base;\r\n    intervalScaleProto.setExtent.call(this, start, end);\r\n  };\r\n  /**\r\n   * @return {number} end\r\n   */\r\n\r\n\r\n  LogScale.prototype.getExtent = function () {\r\n    var base = this.base;\r\n    var extent = scaleProto.getExtent.call(this);\r\n    extent[0] = mathPow(base, extent[0]);\r\n    extent[1] = mathPow(base, extent[1]); // Fix #4158\r\n\r\n    var originalScale = this._originalScale;\r\n    var originalExtent = originalScale.getExtent();\r\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\r\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\r\n    return extent;\r\n  };\r\n\r\n  LogScale.prototype.unionExtent = function (extent) {\r\n    this._originalScale.unionExtent(extent);\r\n\r\n    var base = this.base;\r\n    extent[0] = mathLog(extent[0]) / mathLog(base);\r\n    extent[1] = mathLog(extent[1]) / mathLog(base);\r\n    scaleProto.unionExtent.call(this, extent);\r\n  };\r\n\r\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\r\n    // TODO\r\n    // filter value that <= 0\r\n    this.unionExtent(data.getApproximateExtent(dim));\r\n  };\r\n  /**\r\n   * Update interval and extent of intervals for nice ticks\r\n   * @param approxTickNum default 10 Given approx tick number\r\n   */\r\n\r\n\r\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\r\n    approxTickNum = approxTickNum || 10;\r\n    var extent = this._extent;\r\n    var span = extent[1] - extent[0];\r\n\r\n    if (span === Infinity || span <= 0) {\r\n      return;\r\n    }\r\n\r\n    var interval = numberUtil.quantity(span);\r\n    var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\r\n\r\n    if (err <= 0.5) {\r\n      interval *= 10;\r\n    } // Interval should be integer\r\n\r\n\r\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\r\n      interval *= 10;\r\n    }\r\n\r\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\r\n    this._interval = interval;\r\n    this._niceExtent = niceExtent;\r\n  };\r\n\r\n  LogScale.prototype.calcNiceExtent = function (opt) {\r\n    intervalScaleProto.calcNiceExtent.call(this, opt);\r\n    this._fixMin = opt.fixMin;\r\n    this._fixMax = opt.fixMax;\r\n  };\r\n\r\n  LogScale.prototype.parse = function (val) {\r\n    return val;\r\n  };\r\n\r\n  LogScale.prototype.contain = function (val) {\r\n    val = mathLog(val) / mathLog(this.base);\r\n    return scaleHelper.contain(val, this._extent);\r\n  };\r\n\r\n  LogScale.prototype.normalize = function (val) {\r\n    val = mathLog(val) / mathLog(this.base);\r\n    return scaleHelper.normalize(val, this._extent);\r\n  };\r\n\r\n  LogScale.prototype.scale = function (val) {\r\n    val = scaleHelper.scale(val, this._extent);\r\n    return mathPow(this.base, val);\r\n  };\r\n\r\n  LogScale.type = 'log';\r\n  return LogScale;\r\n}(Scale);\r\n\r\nvar proto = LogScale.prototype;\r\nproto.getMinorTicks = intervalScaleProto.getMinorTicks;\r\nproto.getLabel = intervalScaleProto.getLabel;\r\n\r\nfunction fixRoundingError(val, originalVal) {\r\n  return roundingErrorFix(val, numberUtil.getPrecision(originalVal));\r\n}\r\n\r\nScale.registerClass(LogScale);\r\nexport default LogScale;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\r\nimport { parsePercent } from 'zrender/lib/contain/text.js';\r\n\r\nvar ScaleRawExtentInfo =\r\n/** @class */\r\nfunction () {\r\n  function ScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\r\n  originalExtent) {\r\n    this._prepareParams(scale, model, originalExtent);\r\n  }\r\n  /**\r\n   * Parameters depending on outside (like model, user callback)\r\n   * are prepared and fixed here.\r\n   */\r\n\r\n\r\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, // Usually: data extent from all series on this axis.\r\n  dataExtent) {\r\n    if (dataExtent[1] < dataExtent[0]) {\r\n      dataExtent = [NaN, NaN];\r\n    }\r\n\r\n    this._dataMin = dataExtent[0];\r\n    this._dataMax = dataExtent[1];\r\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\r\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\r\n    var modelMinRaw = this._modelMinRaw = model.get('min', true);\r\n\r\n    if (isFunction(modelMinRaw)) {\r\n      // This callback always provides users the full data extent (before data is filtered).\r\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\r\n        min: dataExtent[0],\r\n        max: dataExtent[1]\r\n      }));\r\n    } else if (modelMinRaw !== 'dataMin') {\r\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\r\n    }\r\n\r\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\r\n\r\n    if (isFunction(modelMaxRaw)) {\r\n      // This callback always provides users the full data extent (before data is filtered).\r\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\r\n        min: dataExtent[0],\r\n        max: dataExtent[1]\r\n      }));\r\n    } else if (modelMaxRaw !== 'dataMax') {\r\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\r\n    }\r\n\r\n    if (isOrdinal) {\r\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\r\n      // and progressive rendering is using, here the category result might just only contain\r\n      // the processed chunk rather than the entire result.\r\n      this._axisDataLen = model.getCategories().length;\r\n    } else {\r\n      var boundaryGap = model.get('boundaryGap');\r\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\r\n\r\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\r\n        }\r\n\r\n        this._boundaryGapInner = [0, 0];\r\n      } else {\r\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * Calculate extent by prepared parameters.\r\n   * This method has no external dependency and can be called duplicatedly,\r\n   * getting the same result.\r\n   * If parameters changed, should call this method to recalcuate.\r\n   */\r\n\r\n\r\n  ScaleRawExtentInfo.prototype.calculate = function () {\r\n    // Notice: When min/max is not set (that is, when there are null/undefined,\r\n    // which is the most common case), these cases should be ensured:\r\n    // (1) For 'ordinal', show all axis.data.\r\n    // (2) For others:\r\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\r\n    //      disabled).\r\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\r\n    //      be the result that originalExtent enlarged by boundaryGap.\r\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\r\n    var isOrdinal = this._isOrdinal;\r\n    var dataMin = this._dataMin;\r\n    var dataMax = this._dataMax;\r\n    var axisDataLen = this._axisDataLen;\r\n    var boundaryGapInner = this._boundaryGapInner;\r\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null; // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\r\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\r\n\r\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\r\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum; // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\r\n\r\n    var minFixed = min != null;\r\n    var maxFixed = max != null;\r\n\r\n    if (min == null) {\r\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\r\n    }\r\n\r\n    if (max == null) {\r\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\r\n    }\r\n\r\n    (min == null || !isFinite(min)) && (min = NaN);\r\n    (max == null || !isFinite(max)) && (max = NaN);\r\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen; // If data extent modified, need to recalculated to ensure cross zero.\r\n\r\n    if (this._needCrossZero) {\r\n      // Axis is over zero and min is not set\r\n      if (min > 0 && max > 0 && !minFixed) {\r\n        min = 0; // minFixed = true;\r\n      } // Axis is under zero and max is not set\r\n\r\n\r\n      if (min < 0 && max < 0 && !maxFixed) {\r\n        max = 0; // maxFixed = true;\r\n      } // PENDING:\r\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\r\n      // that the results processed by boundaryGap are positive/negative?\r\n      // If so, here `minFixed`/`maxFixed` need to be set.\r\n\r\n    }\r\n\r\n    var determinedMin = this._determinedMin;\r\n    var determinedMax = this._determinedMax;\r\n\r\n    if (determinedMin != null) {\r\n      min = determinedMin;\r\n      minFixed = true;\r\n    }\r\n\r\n    if (determinedMax != null) {\r\n      max = determinedMax;\r\n      maxFixed = true;\r\n    } // Ensure min/max be finite number or NaN here. (not to be null/undefined)\r\n    // `NaN` means min/max axis is blank.\r\n\r\n\r\n    return {\r\n      min: min,\r\n      max: max,\r\n      minFixed: minFixed,\r\n      maxFixed: maxFixed,\r\n      isBlank: isBlank\r\n    };\r\n  };\r\n\r\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(!this.frozen);\r\n    }\r\n\r\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\r\n  };\r\n\r\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\r\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(!this.frozen // Earse them usually means logic flaw.\r\n      && this[attr] == null);\r\n    }\r\n\r\n    this[attr] = val;\r\n  };\r\n\r\n  ScaleRawExtentInfo.prototype.freeze = function () {\r\n    // @ts-ignore\r\n    this.frozen = true;\r\n  };\r\n\r\n  return ScaleRawExtentInfo;\r\n}();\r\n\r\nexport { ScaleRawExtentInfo };\r\nvar DETERMINED_MIN_MAX_ATTR = {\r\n  min: '_determinedMin',\r\n  max: '_determinedMax'\r\n};\r\nvar DATA_MIN_MAX_ATTR = {\r\n  min: '_dataMin',\r\n  max: '_dataMax'\r\n};\r\n/**\r\n * Get scale min max and related info only depends on model settings.\r\n * This method can be called after coordinate system created.\r\n * For example, in data processing stage.\r\n *\r\n * Scale extent info probably be required multiple times during a workflow.\r\n * For example:\r\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\r\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\r\n * (3) `coordSys.update` use it to finally decide the scale extent.\r\n * But the callback of `min`/`max` should not be called multiple times.\r\n * The code below should not be implemented repeatedly either.\r\n * So we cache the result in the scale instance, which will be recreated at the beginning\r\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\r\n */\r\n\r\nexport function ensureScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\r\noriginalExtent) {\r\n  // Do not permit to recreate.\r\n  var rawExtentInfo = scale.rawExtentInfo;\r\n\r\n  if (rawExtentInfo) {\r\n    return rawExtentInfo;\r\n  }\r\n\r\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent); // @ts-ignore\r\n\r\n  scale.rawExtentInfo = rawExtentInfo;\r\n  return rawExtentInfo;\r\n}\r\nexport function parseAxisModelMinMax(scale, minMax) {\r\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport OrdinalScale from '../scale/Ordinal.js';\r\nimport IntervalScale from '../scale/Interval.js';\r\nimport Scale from '../scale/Scale.js';\r\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport TimeScale from '../scale/Time.js';\r\nimport LogScale from '../scale/Log.js';\r\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\r\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\r\n/**\r\n * Get axis scale extent before niced.\r\n * Item of returned array can only be number (including Infinity and NaN).\r\n *\r\n * Caution:\r\n * Precondition of calling this method:\r\n * The scale extent has been initialized using series data extent via\r\n * `scale.setExtent` or `scale.unionExtentFromData`;\r\n */\r\n\r\nexport function getScaleExtent(scale, model) {\r\n  var scaleType = scale.type;\r\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\r\n  scale.setBlank(rawExtentResult.isBlank);\r\n  var min = rawExtentResult.min;\r\n  var max = rawExtentResult.max; // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\r\n  // is base axis\r\n  // FIXME\r\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\r\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\r\n  //     Should not depend on series type `bar`?\r\n  // (3) Fix that might overlap when using dataZoom.\r\n  // (4) Consider other chart types using `barGrid`?\r\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\r\n\r\n  var ecModel = model.ecModel;\r\n\r\n  if (ecModel && scaleType === 'time'\r\n  /* || scaleType === 'interval' */\r\n  ) {\r\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\r\n    var isBaseAxisAndHasBarSeries_1 = false;\r\n    zrUtil.each(barSeriesModels, function (seriesModel) {\r\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\r\n    });\r\n\r\n    if (isBaseAxisAndHasBarSeries_1) {\r\n      // Calculate placement of bars on axis. TODO should be decoupled\r\n      // with barLayout\r\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels); // Adjust axis min and max to account for overflow\r\n\r\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\r\n      min = adjustedScale.min;\r\n      max = adjustedScale.max;\r\n    }\r\n  }\r\n\r\n  return {\r\n    extent: [min, max],\r\n    // \"fix\" means \"fixed\", the value should not be\r\n    // changed in the subsequent steps.\r\n    fixMin: rawExtentResult.minFixed,\r\n    fixMax: rawExtentResult.maxFixed\r\n  };\r\n}\r\n\r\nfunction adjustScaleForOverflow(min, max, model, // Only support cartesian coord yet.\r\nbarWidthAndOffset) {\r\n  // Get Axis Length\r\n  var axisExtent = model.axis.getExtent();\r\n  var axisLength = axisExtent[1] - axisExtent[0]; // Get bars on current base axis and calculate min and max overflow\r\n\r\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\r\n\r\n  if (barsOnCurrentAxis === undefined) {\r\n    return {\r\n      min: min,\r\n      max: max\r\n    };\r\n  }\r\n\r\n  var minOverflow = Infinity;\r\n  zrUtil.each(barsOnCurrentAxis, function (item) {\r\n    minOverflow = Math.min(item.offset, minOverflow);\r\n  });\r\n  var maxOverflow = -Infinity;\r\n  zrUtil.each(barsOnCurrentAxis, function (item) {\r\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\r\n  });\r\n  minOverflow = Math.abs(minOverflow);\r\n  maxOverflow = Math.abs(maxOverflow);\r\n  var totalOverFlow = minOverflow + maxOverflow; // Calculate required buffer based on old range and overflow\r\n\r\n  var oldRange = max - min;\r\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\r\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\r\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\r\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\r\n  return {\r\n    min: min,\r\n    max: max\r\n  };\r\n} // Precondition of calling this method:\r\n// The scale extent has been initialized using series data extent via\r\n// `scale.setExtent` or `scale.unionExtentFromData`;\r\n\r\n\r\nexport function niceScaleExtent(scale, inModel) {\r\n  var model = inModel;\r\n  var extentInfo = getScaleExtent(scale, model);\r\n  var extent = extentInfo.extent;\r\n  var splitNumber = model.get('splitNumber');\r\n\r\n  if (scale instanceof LogScale) {\r\n    scale.base = model.get('logBase');\r\n  }\r\n\r\n  var scaleType = scale.type;\r\n  var interval = model.get('interval');\r\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\r\n  scale.setExtent(extent[0], extent[1]);\r\n  scale.calcNiceExtent({\r\n    splitNumber: splitNumber,\r\n    fixMin: extentInfo.fixMin,\r\n    fixMax: extentInfo.fixMax,\r\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\r\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\r\n  }); // If some one specified the min, max. And the default calculated interval\r\n  // is not good enough. He can specify the interval. It is often appeared\r\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\r\n  // to be 60.\r\n  // FIXME\r\n\r\n  if (interval != null) {\r\n    scale.setInterval && scale.setInterval(interval);\r\n  }\r\n}\r\n/**\r\n * @param axisType Default retrieve from model.type\r\n */\r\n\r\nexport function createScaleByModel(model, axisType) {\r\n  axisType = axisType || model.get('type');\r\n\r\n  if (axisType) {\r\n    switch (axisType) {\r\n      // Buildin scale\r\n      case 'category':\r\n        return new OrdinalScale({\r\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\r\n          extent: [Infinity, -Infinity]\r\n        });\r\n\r\n      case 'time':\r\n        return new TimeScale({\r\n          locale: model.ecModel.getLocaleModel(),\r\n          useUTC: model.ecModel.get('useUTC')\r\n        });\r\n\r\n      default:\r\n        // case 'value'/'interval', 'log', or others.\r\n        return new (Scale.getClass(axisType) || IntervalScale)();\r\n    }\r\n  }\r\n}\r\n/**\r\n * Check if the axis cross 0\r\n */\r\n\r\nexport function ifAxisCrossZero(axis) {\r\n  var dataExtent = axis.scale.getExtent();\r\n  var min = dataExtent[0];\r\n  var max = dataExtent[1];\r\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\r\n}\r\n/**\r\n * @param axis\r\n * @return Label formatter function.\r\n *         param: {number} tickValue,\r\n *         param: {number} idx, the index in all ticks.\r\n *                         If category axis, this param is not required.\r\n *         return: {string} label string.\r\n */\r\n\r\nexport function makeLabelFormatter(axis) {\r\n  var labelFormatter = axis.getLabelModel().get('formatter');\r\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\r\n\r\n  if (axis.scale.type === 'time') {\r\n    return function (tpl) {\r\n      return function (tick, idx) {\r\n        return axis.scale.getFormattedLabel(tick, idx, tpl);\r\n      };\r\n    }(labelFormatter);\r\n  } else if (zrUtil.isString(labelFormatter)) {\r\n    return function (tpl) {\r\n      return function (tick) {\r\n        // For category axis, get raw value; for numeric axis,\r\n        // get formatted label like '1,333,444'.\r\n        var label = axis.scale.getLabel(tick);\r\n        var text = tpl.replace('{value}', label != null ? label : '');\r\n        return text;\r\n      };\r\n    }(labelFormatter);\r\n  } else if (zrUtil.isFunction(labelFormatter)) {\r\n    return function (cb) {\r\n      return function (tick, idx) {\r\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\r\n        // But the previous implementation of category axis do not consider the\r\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\r\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\r\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\r\n        // the definition here for back compatibility.\r\n        if (categoryTickStart != null) {\r\n          idx = tick.value - categoryTickStart;\r\n        }\r\n\r\n        return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\r\n          level: tick.level\r\n        } : null);\r\n      };\r\n    }(labelFormatter);\r\n  } else {\r\n    return function (tick) {\r\n      return axis.scale.getLabel(tick);\r\n    };\r\n  }\r\n}\r\nexport function getAxisRawValue(axis, tick) {\r\n  // In category axis with data zoom, tick is not the original\r\n  // index of axis.data. So tick should not be exposed to user\r\n  // in category axis.\r\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\r\n}\r\n/**\r\n * @param axis\r\n * @return Be null/undefined if no labels.\r\n */\r\n\r\nexport function estimateLabelUnionRect(axis) {\r\n  var axisModel = axis.model;\r\n  var scale = axis.scale;\r\n\r\n  if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\r\n    return;\r\n  }\r\n\r\n  var realNumberScaleTicks;\r\n  var tickCount;\r\n  var categoryScaleExtent = scale.getExtent(); // Optimize for large category data, avoid call `getTicks()`.\r\n\r\n  if (scale instanceof OrdinalScale) {\r\n    tickCount = scale.count();\r\n  } else {\r\n    realNumberScaleTicks = scale.getTicks();\r\n    tickCount = realNumberScaleTicks.length;\r\n  }\r\n\r\n  var axisLabelModel = axis.getLabelModel();\r\n  var labelFormatter = makeLabelFormatter(axis);\r\n  var rect;\r\n  var step = 1; // Simple optimization for large amount of labels\r\n\r\n  if (tickCount > 40) {\r\n    step = Math.ceil(tickCount / 40);\r\n  }\r\n\r\n  for (var i = 0; i < tickCount; i += step) {\r\n    var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\r\n      value: categoryScaleExtent[0] + i\r\n    };\r\n    var label = labelFormatter(tick, i);\r\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\r\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\r\n    rect ? rect.union(singleRect) : rect = singleRect;\r\n  }\r\n\r\n  return rect;\r\n}\r\n\r\nfunction rotateTextRect(textRect, rotate) {\r\n  var rotateRadians = rotate * Math.PI / 180;\r\n  var beforeWidth = textRect.width;\r\n  var beforeHeight = textRect.height;\r\n  var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\r\n  var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\r\n  var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\r\n  return rotatedRect;\r\n}\r\n/**\r\n * @param model axisLabelModel or axisTickModel\r\n * @return {number|String} Can be null|'auto'|number|function\r\n */\r\n\r\n\r\nexport function getOptionCategoryInterval(model) {\r\n  var interval = model.get('interval');\r\n  return interval == null ? 'auto' : interval;\r\n}\r\n/**\r\n * Set `categoryInterval` as 0 implicitly indicates that\r\n * show all labels regardless of overlap.\r\n * @param {Object} axis axisModel.axis\r\n */\r\n\r\nexport function shouldShowAllLabels(axis) {\r\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\r\n}\r\nexport function getDataDimensionsOnAxis(data, axisDim) {\r\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\r\n  var dataDimMap = {}; // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\r\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\r\n  // there has been stacked result dim?\r\n\r\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\r\n    // For example, the extent of the original dimension\r\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\r\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\r\n    // because there is no graphic corresponding to [0.1, 0.5].\r\n    // See the case in `test/area-stack.html` `main1`, where area line\r\n    // stack needs `yAxis` not start from 0.\r\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\r\n  });\r\n  return zrUtil.keys(dataDimMap);\r\n}\r\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\r\n  if (data) {\r\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\r\n      var seriesExtent = data.getApproximateExtent(dim);\r\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\r\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\r\n    });\r\n  }\r\n}"],
  "mappings": "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",
  "names": ["key", "scale", "parsePercent", "data", "Scale", "OrdinalMeta", "map", "scale", "OrdinalScale", "IntervalScale", "TimeScale", "unit", "levelTicks", "i", "LogScale", "ScaleRawExtentInfo", "scale", "scale", "scale"]
}
