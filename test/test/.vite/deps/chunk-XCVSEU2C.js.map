{
  "version": 3,
  "sources": ["../../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js", "../../node_modules/echarts/lib/component/axisPointer/viewHelper.js", "../../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js", "../../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js", "../../node_modules/echarts/lib/component/axisPointer/globalListener.js", "../../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js", "../../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js", "../../node_modules/echarts/lib/component/axisPointer/axisTrigger.js", "../../node_modules/echarts/lib/component/axisPointer/install.js", "../../node_modules/echarts/lib/component/tooltip/TooltipModel.js", "../../node_modules/echarts/lib/component/tooltip/helper.js", "../../node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js", "../../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js", "../../node_modules/echarts/lib/component/tooltip/TooltipView.js", "../../node_modules/echarts/lib/component/tooltip/install.js"],
  "sourcesContent": ["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport * as axisPointerModelHelper from './modelHelper.js';\r\nimport * as eventTool from 'zrender/lib/core/event.js';\r\nimport * as throttleUtil from '../../util/throttle.js';\r\nimport { makeInner } from '../../util/model.js';\r\nvar inner = makeInner();\r\nvar clone = zrUtil.clone;\r\nvar bind = zrUtil.bind;\r\n/**\r\n * Base axis pointer class in 2D.\r\n */\r\n\r\nvar BaseAxisPointer =\r\n/** @class */\r\nfunction () {\r\n  function BaseAxisPointer() {\r\n    this._dragging = false;\r\n    /**\r\n     * In px, arbitrary value. Do not set too small,\r\n     * no animation is ok for most cases.\r\n     */\r\n\r\n    this.animationThreshold = 15;\r\n  }\r\n  /**\r\n   * @implement\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\r\n    var value = axisPointerModel.get('value');\r\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\r\n    // be replaced when user calling setOption in not merge mode.\r\n\r\n    this._axisModel = axisModel;\r\n    this._axisPointerModel = axisPointerModel;\r\n    this._api = api; // Optimize: `render` will be called repeatedly during mouse move.\r\n    // So it is power consuming if performing `render` each time,\r\n    // especially on mobile device.\r\n\r\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\r\n      return;\r\n    }\r\n\r\n    this._lastValue = value;\r\n    this._lastStatus = status;\r\n    var group = this._group;\r\n    var handle = this._handle;\r\n\r\n    if (!status || status === 'hide') {\r\n      // Do not clear here, for animation better.\r\n      group && group.hide();\r\n      handle && handle.hide();\r\n      return;\r\n    }\r\n\r\n    group && group.show();\r\n    handle && handle.show(); // Otherwise status is 'show'\r\n\r\n    var elOption = {};\r\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\r\n\r\n    var graphicKey = elOption.graphicKey;\r\n\r\n    if (graphicKey !== this._lastGraphicKey) {\r\n      this.clear(api);\r\n    }\r\n\r\n    this._lastGraphicKey = graphicKey;\r\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\r\n\r\n    if (!group) {\r\n      group = this._group = new graphic.Group();\r\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\r\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\r\n      api.getZr().add(group);\r\n    } else {\r\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\r\n      this.updatePointerEl(group, elOption, doUpdateProps);\r\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\r\n    }\r\n\r\n    updateMandatoryProps(group, axisPointerModel, true);\r\n\r\n    this._renderHandle(value);\r\n  };\r\n  /**\r\n   * @implement\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.remove = function (api) {\r\n    this.clear(api);\r\n  };\r\n  /**\r\n   * @implement\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.dispose = function (api) {\r\n    this.clear(api);\r\n  };\r\n  /**\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\r\n    var animation = axisPointerModel.get('animation');\r\n    var axis = axisModel.axis;\r\n    var isCategoryAxis = axis.type === 'category';\r\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\r\n\r\n    if (!useSnap && !isCategoryAxis) {\r\n      return false;\r\n    }\r\n\r\n    if (animation === 'auto' || animation == null) {\r\n      var animationThreshold = this.animationThreshold;\r\n\r\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\r\n        return true;\r\n      } // It is important to auto animation when snap used. Consider if there is\r\n      // a dataZoom, animation will be disabled when too many points exist, while\r\n      // it will be enabled for better visual effect when little points exist.\r\n\r\n\r\n      if (useSnap) {\r\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\r\n        var axisExtent = axis.getExtent(); // Approximate band width\r\n\r\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    return animation === true;\r\n  };\r\n  /**\r\n   * add {pointer, label, graphicKey} to elOption\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Should be implemenented by sub-class.\r\n  };\r\n  /**\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\r\n    var pointerOption = elOption.pointer;\r\n\r\n    if (pointerOption) {\r\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\r\n      group.add(pointerEl);\r\n    }\r\n  };\r\n  /**\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\r\n    if (elOption.label) {\r\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\r\n      group.add(labelEl);\r\n      updateLabelShowHide(labelEl, axisPointerModel);\r\n    }\r\n  };\r\n  /**\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\r\n    var pointerEl = inner(group).pointerEl;\r\n\r\n    if (pointerEl && elOption.pointer) {\r\n      pointerEl.setStyle(elOption.pointer.style);\r\n      updateProps(pointerEl, {\r\n        shape: elOption.pointer.shape\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\r\n    var labelEl = inner(group).labelEl;\r\n\r\n    if (labelEl) {\r\n      labelEl.setStyle(elOption.label.style);\r\n      updateProps(labelEl, {\r\n        // Consider text length change in vertical axis, animation should\r\n        // be used on shape, otherwise the effect will be weird.\r\n        // TODOTODO\r\n        // shape: elOption.label.shape,\r\n        x: elOption.label.x,\r\n        y: elOption.label.y\r\n      });\r\n      updateLabelShowHide(labelEl, axisPointerModel);\r\n    }\r\n  };\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype._renderHandle = function (value) {\r\n    if (this._dragging || !this.updateHandleTransform) {\r\n      return;\r\n    }\r\n\r\n    var axisPointerModel = this._axisPointerModel;\r\n\r\n    var zr = this._api.getZr();\r\n\r\n    var handle = this._handle;\r\n    var handleModel = axisPointerModel.getModel('handle');\r\n    var status = axisPointerModel.get('status');\r\n\r\n    if (!handleModel.get('show') || !status || status === 'hide') {\r\n      handle && zr.remove(handle);\r\n      this._handle = null;\r\n      return;\r\n    }\r\n\r\n    var isInit;\r\n\r\n    if (!this._handle) {\r\n      isInit = true;\r\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\r\n        cursor: 'move',\r\n        draggable: true,\r\n        onmousemove: function (e) {\r\n          // For mobile device, prevent screen slider on the button.\r\n          eventTool.stop(e.event);\r\n        },\r\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\r\n        drift: bind(this._onHandleDragMove, this),\r\n        ondragend: bind(this._onHandleDragEnd, this)\r\n      });\r\n      zr.add(handle);\r\n    }\r\n\r\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\r\n\r\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\r\n\r\n    var handleSize = handleModel.get('size');\r\n\r\n    if (!zrUtil.isArray(handleSize)) {\r\n      handleSize = [handleSize, handleSize];\r\n    }\r\n\r\n    handle.scaleX = handleSize[0] / 2;\r\n    handle.scaleY = handleSize[1] / 2;\r\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\r\n\r\n    this._moveHandleToValue(value, isInit);\r\n  };\r\n\r\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\r\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\r\n  };\r\n\r\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\r\n    var handle = this._handle;\r\n\r\n    if (!handle) {\r\n      return;\r\n    }\r\n\r\n    this._dragging = true; // Persistent for throttle.\r\n\r\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\r\n    this._payloadInfo = trans;\r\n    handle.stopAnimation();\r\n    handle.attr(getHandleTransProps(trans));\r\n    inner(handle).lastProp = null;\r\n\r\n    this._doDispatchAxisPointer();\r\n  };\r\n  /**\r\n   * Throttled method.\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\r\n    var handle = this._handle;\r\n\r\n    if (!handle) {\r\n      return;\r\n    }\r\n\r\n    var payloadInfo = this._payloadInfo;\r\n    var axisModel = this._axisModel;\r\n\r\n    this._api.dispatchAction({\r\n      type: 'updateAxisPointer',\r\n      x: payloadInfo.cursorPoint[0],\r\n      y: payloadInfo.cursorPoint[1],\r\n      tooltipOption: payloadInfo.tooltipOption,\r\n      axesInfo: [{\r\n        axisDim: axisModel.axis.dim,\r\n        axisIndex: axisModel.componentIndex\r\n      }]\r\n    });\r\n  };\r\n\r\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\r\n    this._dragging = false;\r\n    var handle = this._handle;\r\n\r\n    if (!handle) {\r\n      return;\r\n    }\r\n\r\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\r\n    // axisPointer. So move handle to align the exact value position when\r\n    // drag ended.\r\n\r\n\r\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\r\n    // button, and will be hidden after finger left handle button.\r\n\r\n\r\n    this._api.dispatchAction({\r\n      type: 'hideTip'\r\n    });\r\n  };\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.clear = function (api) {\r\n    this._lastValue = null;\r\n    this._lastStatus = null;\r\n    var zr = api.getZr();\r\n    var group = this._group;\r\n    var handle = this._handle;\r\n\r\n    if (zr && group) {\r\n      this._lastGraphicKey = null;\r\n      group && zr.remove(group);\r\n      handle && zr.remove(handle);\r\n      this._group = null;\r\n      this._handle = null;\r\n      this._payloadInfo = null;\r\n    }\r\n\r\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\r\n  };\r\n  /**\r\n   * @protected\r\n   */\r\n\r\n\r\n  BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\r\n  };\r\n\r\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\r\n    xDimIndex = xDimIndex || 0;\r\n    return {\r\n      x: xy[xDimIndex],\r\n      y: xy[1 - xDimIndex],\r\n      width: wh[xDimIndex],\r\n      height: wh[1 - xDimIndex]\r\n    };\r\n  };\r\n\r\n  return BaseAxisPointer;\r\n}();\r\n\r\nfunction updateProps(animationModel, moveAnimation, el, props) {\r\n  // Animation optimize.\r\n  if (!propsEqual(inner(el).lastProp, props)) {\r\n    inner(el).lastProp = props;\r\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\r\n  }\r\n}\r\n\r\nfunction propsEqual(lastProps, newProps) {\r\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\r\n    var equals_1 = true;\r\n    zrUtil.each(newProps, function (item, key) {\r\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\r\n    });\r\n    return !!equals_1;\r\n  } else {\r\n    return lastProps === newProps;\r\n  }\r\n}\r\n\r\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\r\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\r\n}\r\n\r\nfunction getHandleTransProps(trans) {\r\n  return {\r\n    x: trans.x || 0,\r\n    y: trans.y || 0,\r\n    rotation: trans.rotation || 0\r\n  };\r\n}\r\n\r\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\r\n  var z = axisPointerModel.get('z');\r\n  var zlevel = axisPointerModel.get('zlevel');\r\n  group && group.traverse(function (el) {\r\n    if (el.type !== 'group') {\r\n      z != null && (el.z = z);\r\n      zlevel != null && (el.zlevel = zlevel);\r\n      el.silent = silent;\r\n    }\r\n  });\r\n}\r\n\r\nexport default BaseAxisPointer;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport * as textContain from 'zrender/lib/contain/text.js';\r\nimport * as formatUtil from '../../util/format.js';\r\nimport * as matrix from 'zrender/lib/core/matrix.js';\r\nimport * as axisHelper from '../../coord/axisHelper.js';\r\nimport AxisBuilder from '../axis/AxisBuilder.js';\r\nimport { createTextStyle } from '../../label/labelStyle.js';\r\nexport function buildElStyle(axisPointerModel) {\r\n  var axisPointerType = axisPointerModel.get('type');\r\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\r\n  var style;\r\n\r\n  if (axisPointerType === 'line') {\r\n    style = styleModel.getLineStyle();\r\n    style.fill = null;\r\n  } else if (axisPointerType === 'shadow') {\r\n    style = styleModel.getAreaStyle();\r\n    style.stroke = null;\r\n  }\r\n\r\n  return style;\r\n}\r\n/**\r\n * @param {Function} labelPos {align, verticalAlign, position}\r\n */\r\n\r\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\r\n  var value = axisPointerModel.get('value');\r\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\r\n    precision: axisPointerModel.get(['label', 'precision']),\r\n    formatter: axisPointerModel.get(['label', 'formatter'])\r\n  });\r\n  var labelModel = axisPointerModel.getModel('label');\r\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\r\n  var font = labelModel.getFont();\r\n  var textRect = textContain.getBoundingRect(text, font);\r\n  var position = labelPos.position;\r\n  var width = textRect.width + paddings[1] + paddings[3];\r\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\r\n\r\n  var align = labelPos.align;\r\n  align === 'right' && (position[0] -= width);\r\n  align === 'center' && (position[0] -= width / 2);\r\n  var verticalAlign = labelPos.verticalAlign;\r\n  verticalAlign === 'bottom' && (position[1] -= height);\r\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\r\n\r\n  confineInContainer(position, width, height, api);\r\n  var bgColor = labelModel.get('backgroundColor');\r\n\r\n  if (!bgColor || bgColor === 'auto') {\r\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\r\n  }\r\n\r\n  elOption.label = {\r\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\r\n    x: position[0],\r\n    y: position[1],\r\n    style: createTextStyle(labelModel, {\r\n      text: text,\r\n      font: font,\r\n      fill: labelModel.getTextColor(),\r\n      padding: paddings,\r\n      backgroundColor: bgColor\r\n    }),\r\n    // Label should be over axisPointer.\r\n    z2: 10\r\n  };\r\n} // Do not overflow ec container\r\n\r\nfunction confineInContainer(position, width, height, api) {\r\n  var viewWidth = api.getWidth();\r\n  var viewHeight = api.getHeight();\r\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\r\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\r\n  position[0] = Math.max(position[0], 0);\r\n  position[1] = Math.max(position[1], 0);\r\n}\r\n\r\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\r\n  value = axis.scale.parse(value);\r\n  var text = axis.scale.getLabel({\r\n    value: value\r\n  }, {\r\n    // If `precision` is set, width can be fixed (like '12.00500'), which\r\n    // helps to debounce when when moving label.\r\n    precision: opt.precision\r\n  });\r\n  var formatter = opt.formatter;\r\n\r\n  if (formatter) {\r\n    var params_1 = {\r\n      value: axisHelper.getAxisRawValue(axis, {\r\n        value: value\r\n      }),\r\n      axisDimension: axis.dim,\r\n      axisIndex: axis.index,\r\n      seriesData: []\r\n    };\r\n    zrUtil.each(seriesDataIndices, function (idxItem) {\r\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\r\n      var dataIndex = idxItem.dataIndexInside;\r\n      var dataParams = series && series.getDataParams(dataIndex);\r\n      dataParams && params_1.seriesData.push(dataParams);\r\n    });\r\n\r\n    if (zrUtil.isString(formatter)) {\r\n      text = formatter.replace('{value}', text);\r\n    } else if (zrUtil.isFunction(formatter)) {\r\n      text = formatter(params_1);\r\n    }\r\n  }\r\n\r\n  return text;\r\n}\r\nexport function getTransformedPosition(axis, value, layoutInfo) {\r\n  var transform = matrix.create();\r\n  matrix.rotate(transform, transform, layoutInfo.rotation);\r\n  matrix.translate(transform, transform, layoutInfo.position);\r\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\r\n}\r\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\r\n  // @ts-ignore\r\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\r\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\r\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\r\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\r\n    align: textLayout.textAlign,\r\n    verticalAlign: textLayout.textVerticalAlign\r\n  });\r\n}\r\nexport function makeLineShape(p1, p2, xDimIndex) {\r\n  xDimIndex = xDimIndex || 0;\r\n  return {\r\n    x1: p1[xDimIndex],\r\n    y1: p1[1 - xDimIndex],\r\n    x2: p2[xDimIndex],\r\n    y2: p2[1 - xDimIndex]\r\n  };\r\n}\r\nexport function makeRectShape(xy, wh, xDimIndex) {\r\n  xDimIndex = xDimIndex || 0;\r\n  return {\r\n    x: xy[xDimIndex],\r\n    y: xy[1 - xDimIndex],\r\n    width: wh[xDimIndex],\r\n    height: wh[1 - xDimIndex]\r\n  };\r\n}\r\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\r\n  return {\r\n    cx: cx,\r\n    cy: cy,\r\n    r0: r0,\r\n    r: r,\r\n    startAngle: startAngle,\r\n    endAngle: endAngle,\r\n    clockwise: true\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport BaseAxisPointer from './BaseAxisPointer.js';\r\nimport * as viewHelper from './viewHelper.js';\r\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\r\n\r\nvar CartesianAxisPointer =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(CartesianAxisPointer, _super);\r\n\r\n  function CartesianAxisPointer() {\r\n    return _super !== null && _super.apply(this, arguments) || this;\r\n  }\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\r\n    var axis = axisModel.axis;\r\n    var grid = axis.grid;\r\n    var axisPointerType = axisPointerModel.get('type');\r\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\r\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\r\n\r\n    if (axisPointerType && axisPointerType !== 'none') {\r\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\r\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\r\n      pointerOption.style = elStyle;\r\n      elOption.graphicKey = pointerOption.type;\r\n      elOption.pointer = pointerOption;\r\n    }\r\n\r\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\r\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\r\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\r\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\r\n      labelInside: false\r\n    }); // @ts-ignore\r\n\r\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\r\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\r\n    return {\r\n      x: pos[0],\r\n      y: pos[1],\r\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\r\n    };\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\r\n    var axis = axisModel.axis;\r\n    var grid = axis.grid;\r\n    var axisExtent = axis.getGlobalExtent(true);\r\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\r\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\r\n    var currPosition = [transform.x, transform.y];\r\n    currPosition[dimIndex] += delta[dimIndex];\r\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\r\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\r\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\r\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\r\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\r\n\r\n    var tooltipOptions = [{\r\n      verticalAlign: 'middle'\r\n    }, {\r\n      align: 'center'\r\n    }];\r\n    return {\r\n      x: currPosition[0],\r\n      y: currPosition[1],\r\n      rotation: transform.rotation,\r\n      cursorPoint: cursorPoint,\r\n      tooltipOption: tooltipOptions[dimIndex]\r\n    };\r\n  };\r\n\r\n  return CartesianAxisPointer;\r\n}(BaseAxisPointer);\r\n\r\nfunction getCartesian(grid, axis) {\r\n  var opt = {};\r\n  opt[axis.dim + 'AxisIndex'] = axis.index;\r\n  return grid.getCartesian(opt);\r\n}\r\n\r\nvar pointerShapeBuilder = {\r\n  line: function (axis, pixelValue, otherExtent) {\r\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\r\n    return {\r\n      type: 'Line',\r\n      subPixelOptimize: true,\r\n      shape: targetShape\r\n    };\r\n  },\r\n  shadow: function (axis, pixelValue, otherExtent) {\r\n    var bandWidth = Math.max(1, axis.getBandWidth());\r\n    var span = otherExtent[1] - otherExtent[0];\r\n    return {\r\n      type: 'Rect',\r\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\r\n    };\r\n  }\r\n};\r\n\r\nfunction getAxisDimIndex(axis) {\r\n  return axis.dim === 'x' ? 0 : 1;\r\n}\r\n\r\nexport default CartesianAxisPointer;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport ComponentModel from '../../model/Component.js';\r\n\r\nvar AxisPointerModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(AxisPointerModel, _super);\r\n\r\n  function AxisPointerModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = AxisPointerModel.type;\r\n    return _this;\r\n  }\r\n\r\n  AxisPointerModel.type = 'axisPointer';\r\n  AxisPointerModel.defaultOption = {\r\n    // 'auto' means that show when triggered by tooltip or handle.\r\n    show: 'auto',\r\n    // zlevel: 0,\r\n    z: 50,\r\n    type: 'line',\r\n    // axispointer triggered by tootip determine snap automatically,\r\n    // see `modelHelper`.\r\n    snap: false,\r\n    triggerTooltip: true,\r\n    value: null,\r\n    status: null,\r\n    link: [],\r\n    // Do not set 'auto' here, otherwise global animation: false\r\n    // will not effect at this axispointer.\r\n    animation: null,\r\n    animationDurationUpdate: 200,\r\n    lineStyle: {\r\n      color: '#B9BEC9',\r\n      width: 1,\r\n      type: 'dashed'\r\n    },\r\n    shadowStyle: {\r\n      color: 'rgba(210,219,238,0.2)'\r\n    },\r\n    label: {\r\n      show: true,\r\n      formatter: null,\r\n      precision: 'auto',\r\n      margin: 3,\r\n      color: '#fff',\r\n      padding: [5, 7, 5, 7],\r\n      backgroundColor: 'auto',\r\n      borderColor: null,\r\n      borderWidth: 0,\r\n      borderRadius: 3\r\n    },\r\n    handle: {\r\n      show: false,\r\n      // eslint-disable-next-line\r\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\r\n      size: 45,\r\n      // handle margin is from symbol center to axis, which is stable when circular move.\r\n      margin: 50,\r\n      // color: '#1b8bbd'\r\n      // color: '#2f4554'\r\n      color: '#333',\r\n      shadowBlur: 3,\r\n      shadowColor: '#aaa',\r\n      shadowOffsetX: 0,\r\n      shadowOffsetY: 2,\r\n      // For mobile performance\r\n      throttle: 40\r\n    }\r\n  };\r\n  return AxisPointerModel;\r\n}(ComponentModel);\r\n\r\nexport default AxisPointerModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport env from 'zrender/lib/core/env.js';\r\nimport { makeInner } from '../../util/model.js';\r\nvar inner = makeInner();\r\nvar each = zrUtil.each;\r\n/**\r\n * @param {string} key\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Function} handler\r\n *      param: {string} currTrigger\r\n *      param: {Array.<number>} point\r\n */\r\n\r\nexport function register(key, api, handler) {\r\n  if (env.node) {\r\n    return;\r\n  }\r\n\r\n  var zr = api.getZr();\r\n  inner(zr).records || (inner(zr).records = {});\r\n  initGlobalListeners(zr, api);\r\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\r\n  record.handler = handler;\r\n}\r\n\r\nfunction initGlobalListeners(zr, api) {\r\n  if (inner(zr).initialized) {\r\n    return;\r\n  }\r\n\r\n  inner(zr).initialized = true;\r\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\r\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\r\n\r\n  useHandler('globalout', onLeave);\r\n\r\n  function useHandler(eventType, cb) {\r\n    zr.on(eventType, function (e) {\r\n      var dis = makeDispatchAction(api);\r\n      each(inner(zr).records, function (record) {\r\n        record && cb(record, e, dis.dispatchAction);\r\n      });\r\n      dispatchTooltipFinally(dis.pendings, api);\r\n    });\r\n  }\r\n}\r\n\r\nfunction dispatchTooltipFinally(pendings, api) {\r\n  var showLen = pendings.showTip.length;\r\n  var hideLen = pendings.hideTip.length;\r\n  var actuallyPayload;\r\n\r\n  if (showLen) {\r\n    actuallyPayload = pendings.showTip[showLen - 1];\r\n  } else if (hideLen) {\r\n    actuallyPayload = pendings.hideTip[hideLen - 1];\r\n  }\r\n\r\n  if (actuallyPayload) {\r\n    actuallyPayload.dispatchAction = null;\r\n    api.dispatchAction(actuallyPayload);\r\n  }\r\n}\r\n\r\nfunction onLeave(record, e, dispatchAction) {\r\n  record.handler('leave', null, dispatchAction);\r\n}\r\n\r\nfunction doEnter(currTrigger, record, e, dispatchAction) {\r\n  record.handler(currTrigger, e, dispatchAction);\r\n}\r\n\r\nfunction makeDispatchAction(api) {\r\n  var pendings = {\r\n    showTip: [],\r\n    hideTip: []\r\n  }; // FIXME\r\n  // better approach?\r\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\r\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\r\n  // So we have to add \"final stage\" to merge those dispatched actions.\r\n\r\n  var dispatchAction = function (payload) {\r\n    var pendingList = pendings[payload.type];\r\n\r\n    if (pendingList) {\r\n      pendingList.push(payload);\r\n    } else {\r\n      payload.dispatchAction = dispatchAction;\r\n      api.dispatchAction(payload);\r\n    }\r\n  };\r\n\r\n  return {\r\n    dispatchAction: dispatchAction,\r\n    pendings: pendings\r\n  };\r\n}\r\n\r\nexport function unregister(key, api) {\r\n  if (env.node) {\r\n    return;\r\n  }\r\n\r\n  var zr = api.getZr();\r\n  var record = (inner(zr).records || {})[key];\r\n\r\n  if (record) {\r\n    inner(zr).records[key] = null;\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as globalListener from './globalListener.js';\r\nimport ComponentView from '../../view/Component.js';\r\n\r\nvar AxisPointerView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(AxisPointerView, _super);\r\n\r\n  function AxisPointerView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = AxisPointerView.type;\r\n    return _this;\r\n  }\r\n\r\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\r\n    var globalTooltipModel = ecModel.getComponent('tooltip');\r\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\r\n    // AxisPointerView to be independent to Tooltip.\r\n\r\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\r\n      // If 'none', it is not controlled by mouse totally.\r\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\r\n        dispatchAction({\r\n          type: 'updateAxisPointer',\r\n          currTrigger: currTrigger,\r\n          x: e && e.offsetX,\r\n          y: e && e.offsetY\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  AxisPointerView.prototype.remove = function (ecModel, api) {\r\n    globalListener.unregister('axisPointer', api);\r\n  };\r\n\r\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\r\n    globalListener.unregister('axisPointer', api);\r\n  };\r\n\r\n  AxisPointerView.type = 'axisPointer';\r\n  return AxisPointerView;\r\n}(ComponentView);\r\n\r\nexport default AxisPointerView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as modelUtil from '../../util/model.js';\r\n/**\r\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\r\n * @param ecModel\r\n * @return  {point: [x, y], el: ...} point Will not be null.\r\n */\r\n\r\nexport default function findPointFromSeries(finder, ecModel) {\r\n  var point = [];\r\n  var seriesIndex = finder.seriesIndex;\r\n  var seriesModel;\r\n\r\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\r\n    return {\r\n      point: []\r\n    };\r\n  }\r\n\r\n  var data = seriesModel.getData();\r\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\r\n\r\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\r\n    return {\r\n      point: []\r\n    };\r\n  }\r\n\r\n  var el = data.getItemGraphicEl(dataIndex);\r\n  var coordSys = seriesModel.coordinateSystem;\r\n\r\n  if (seriesModel.getTooltipPosition) {\r\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\r\n  } else if (coordSys && coordSys.dataToPoint) {\r\n    if (finder.isStacked) {\r\n      var baseAxis = coordSys.getBaseAxis();\r\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n      var valueAxisDim = valueAxis.dim;\r\n      var baseAxisDim = baseAxis.dim;\r\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\r\n      var baseDim = data.mapDimension(baseAxisDim);\r\n      var stackedData = [];\r\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\r\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\r\n      point = coordSys.dataToPoint(stackedData) || [];\r\n    } else {\r\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\r\n        return data.mapDimension(dim);\r\n      }), dataIndex)) || [];\r\n    }\r\n  } else if (el) {\r\n    // Use graphic bounding rect\r\n    var rect = el.getBoundingRect().clone();\r\n    rect.applyTransform(el.transform);\r\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\r\n  }\r\n\r\n  return {\r\n    point: point,\r\n    el: el\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { makeInner } from '../../util/model.js';\r\nimport * as modelHelper from './modelHelper.js';\r\nimport findPointFromSeries from './findPointFromSeries.js';\r\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\r\nvar inner = makeInner();\r\n/**\r\n * Basic logic: check all axis, if they do not demand show/highlight,\r\n * then hide/downplay them.\r\n *\r\n * @return content of event obj for echarts.connect.\r\n */\r\n\r\nexport default function axisTrigger(payload, ecModel, api) {\r\n  var currTrigger = payload.currTrigger;\r\n  var point = [payload.x, payload.y];\r\n  var finder = payload;\r\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\r\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\r\n  // See #6121. But we are not able to reproduce it yet.\r\n\r\n  if (!coordSysAxesInfo) {\r\n    return;\r\n  }\r\n\r\n  if (illegalPoint(point)) {\r\n    // Used in the default behavior of `connection`: use the sample seriesIndex\r\n    // and dataIndex. And also used in the tooltipView trigger.\r\n    point = findPointFromSeries({\r\n      seriesIndex: finder.seriesIndex,\r\n      // Do not use dataIndexInside from other ec instance.\r\n      // FIXME: auto detect it?\r\n      dataIndex: finder.dataIndex\r\n    }, ecModel).point;\r\n  }\r\n\r\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\r\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\r\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\r\n  // and dataIndex.\r\n\r\n  var inputAxesInfo = finder.axesInfo;\r\n  var axesInfo = coordSysAxesInfo.axesInfo;\r\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\r\n  var outputPayload = {};\r\n  var showValueMap = {};\r\n  var dataByCoordSys = {\r\n    list: [],\r\n    map: {}\r\n  };\r\n  var updaters = {\r\n    showPointer: curry(showPointer, showValueMap),\r\n    showTooltip: curry(showTooltip, dataByCoordSys)\r\n  }; // Process for triggered axes.\r\n\r\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\r\n    // If a point given, it must be contained by the coordinate system.\r\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\r\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\r\n      var axis = axisInfo.axis;\r\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\r\n\r\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\r\n        var val = inputAxisInfo && inputAxisInfo.value;\r\n\r\n        if (val == null && !isIllegalPoint) {\r\n          val = axis.pointToData(point);\r\n        }\r\n\r\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\r\n      }\r\n    });\r\n  }); // Process for linked axes.\r\n\r\n  var linkTriggers = {};\r\n  each(axesInfo, function (tarAxisInfo, tarKey) {\r\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\r\n\r\n    if (linkGroup && !showValueMap[tarKey]) {\r\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\r\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\r\n\r\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\r\n          var val = srcValItem.value;\r\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\r\n          linkTriggers[tarAxisInfo.key] = val;\r\n        }\r\n      });\r\n    }\r\n  });\r\n  each(linkTriggers, function (val, tarKey) {\r\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\r\n  });\r\n  updateModelActually(showValueMap, axesInfo, outputPayload);\r\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\r\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\r\n  return outputPayload;\r\n}\r\n\r\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\r\n  var axis = axisInfo.axis;\r\n\r\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\r\n    return;\r\n  }\r\n\r\n  if (!axisInfo.involveSeries) {\r\n    updaters.showPointer(axisInfo, newValue);\r\n    return;\r\n  } // Heavy calculation. So put it after axis.containData checking.\r\n\r\n\r\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\r\n  var payloadBatch = payloadInfo.payloadBatch;\r\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\r\n  // By default use the first involved series data as a sample to connect.\r\n\r\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\r\n    extend(outputFinder, payloadBatch[0]);\r\n  } // If no linkSource input, this process is for collecting link\r\n  // target, where snap should not be accepted.\r\n\r\n\r\n  if (!noSnap && axisInfo.snap) {\r\n    if (axis.containData(snapToValue) && snapToValue != null) {\r\n      newValue = snapToValue;\r\n    }\r\n  }\r\n\r\n  updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\r\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\r\n\r\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\r\n}\r\n\r\nfunction buildPayloadsBySeries(value, axisInfo) {\r\n  var axis = axisInfo.axis;\r\n  var dim = axis.dim;\r\n  var snapToValue = value;\r\n  var payloadBatch = [];\r\n  var minDist = Number.MAX_VALUE;\r\n  var minDiff = -1;\r\n  each(axisInfo.seriesModels, function (series, idx) {\r\n    var dataDim = series.getData().mapDimensionsAll(dim);\r\n    var seriesNestestValue;\r\n    var dataIndices;\r\n\r\n    if (series.getAxisTooltipData) {\r\n      var result = series.getAxisTooltipData(dataDim, value, axis);\r\n      dataIndices = result.dataIndices;\r\n      seriesNestestValue = result.nestestValue;\r\n    } else {\r\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\r\n      // when data length is not same.\r\n      // false,\r\n      axis.type === 'category' ? 0.5 : null);\r\n\r\n      if (!dataIndices.length) {\r\n        return;\r\n      }\r\n\r\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\r\n    }\r\n\r\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\r\n      return;\r\n    }\r\n\r\n    var diff = value - seriesNestestValue;\r\n    var dist = Math.abs(diff); // Consider category case\r\n\r\n    if (dist <= minDist) {\r\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\r\n        minDist = dist;\r\n        minDiff = diff;\r\n        snapToValue = seriesNestestValue;\r\n        payloadBatch.length = 0;\r\n      }\r\n\r\n      each(dataIndices, function (dataIndex) {\r\n        payloadBatch.push({\r\n          seriesIndex: series.seriesIndex,\r\n          dataIndexInside: dataIndex,\r\n          dataIndex: series.getData().getRawIndex(dataIndex)\r\n        });\r\n      });\r\n    }\r\n  });\r\n  return {\r\n    payloadBatch: payloadBatch,\r\n    snapToValue: snapToValue\r\n  };\r\n}\r\n\r\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\r\n  showValueMap[axisInfo.key] = {\r\n    value: value,\r\n    payloadBatch: payloadBatch\r\n  };\r\n}\r\n\r\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\r\n  var payloadBatch = payloadInfo.payloadBatch;\r\n  var axis = axisInfo.axis;\r\n  var axisModel = axis.model;\r\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\r\n  // whose length will be used to judge whether dispatch action.\r\n\r\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\r\n    return;\r\n  }\r\n\r\n  var coordSysModel = axisInfo.coordSys.model;\r\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\r\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\r\n\r\n  if (!coordSysItem) {\r\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\r\n      coordSysId: coordSysModel.id,\r\n      coordSysIndex: coordSysModel.componentIndex,\r\n      coordSysType: coordSysModel.type,\r\n      coordSysMainType: coordSysModel.mainType,\r\n      dataByAxis: []\r\n    };\r\n    dataByCoordSys.list.push(coordSysItem);\r\n  }\r\n\r\n  coordSysItem.dataByAxis.push({\r\n    axisDim: axis.dim,\r\n    axisIndex: axisModel.componentIndex,\r\n    axisType: axisModel.type,\r\n    axisId: axisModel.id,\r\n    value: value,\r\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\r\n    // depends that all models have been updated. So it should not be performed\r\n    // here. Considering axisPointerModel used here is volatile, which is hard\r\n    // to be retrieve in TooltipView, we prepare parameters here.\r\n    valueLabelOpt: {\r\n      precision: axisPointerModel.get(['label', 'precision']),\r\n      formatter: axisPointerModel.get(['label', 'formatter'])\r\n    },\r\n    seriesDataIndices: payloadBatch.slice()\r\n  });\r\n}\r\n\r\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\r\n  var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\r\n\r\n  each(axesInfo, function (axisInfo, key) {\r\n    var option = axisInfo.axisPointerModel.option;\r\n    var valItem = showValueMap[key];\r\n\r\n    if (valItem) {\r\n      !axisInfo.useHandle && (option.status = 'show');\r\n      option.value = valItem.value; // For label formatter param and highlight.\r\n\r\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\r\n    } // When always show (e.g., handle used), remain\r\n    // original value and status.\r\n    else {\r\n        // If hide, value still need to be set, consider\r\n        // click legend to toggle axis blank.\r\n        !axisInfo.useHandle && (option.status = 'hide');\r\n      } // If status is 'hide', should be no info in payload.\r\n\r\n\r\n    option.status === 'show' && outputAxesInfo.push({\r\n      axisDim: axisInfo.axis.dim,\r\n      axisIndex: axisInfo.axis.model.componentIndex,\r\n      value: option.value\r\n    });\r\n  });\r\n}\r\n\r\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\r\n  // Basic logic: If no showTip required, hideTip will be dispatched.\r\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\r\n    dispatchAction({\r\n      type: 'hideTip'\r\n    });\r\n    return;\r\n  } // In most case only one axis (or event one series is used). It is\r\n  // convenient to fetch payload.seriesIndex and payload.dataIndex\r\n  // directly. So put the first seriesIndex and dataIndex of the first\r\n  // axis on the payload.\r\n\r\n\r\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\r\n  dispatchAction({\r\n    type: 'showTip',\r\n    escapeConnect: true,\r\n    x: point[0],\r\n    y: point[1],\r\n    tooltipOption: payload.tooltipOption,\r\n    position: payload.position,\r\n    dataIndexInside: sampleItem.dataIndexInside,\r\n    dataIndex: sampleItem.dataIndex,\r\n    seriesIndex: sampleItem.seriesIndex,\r\n    dataByCoordSys: dataByCoordSys.list\r\n  });\r\n}\r\n\r\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\r\n  // FIXME\r\n  // highlight status modification should be a stage of main process?\r\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\r\n  var zr = api.getZr();\r\n  var highDownKey = 'axisPointerLastHighlights';\r\n  var lastHighlights = inner(zr)[highDownKey] || {};\r\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\r\n  // Build hash map and remove duplicate incidentally.\r\n\r\n  each(axesInfo, function (axisInfo, key) {\r\n    var option = axisInfo.axisPointerModel.option;\r\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\r\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\r\n      newHighlights[key] = batchItem;\r\n    });\r\n  }); // Diff.\r\n\r\n  var toHighlight = [];\r\n  var toDownplay = [];\r\n  each(lastHighlights, function (batchItem, key) {\r\n    !newHighlights[key] && toDownplay.push(batchItem);\r\n  });\r\n  each(newHighlights, function (batchItem, key) {\r\n    !lastHighlights[key] && toHighlight.push(batchItem);\r\n  });\r\n  toDownplay.length && api.dispatchAction({\r\n    type: 'downplay',\r\n    escapeConnect: true,\r\n    // Not blur others when highlight in axisPointer.\r\n    notBlur: true,\r\n    batch: toDownplay\r\n  });\r\n  toHighlight.length && api.dispatchAction({\r\n    type: 'highlight',\r\n    escapeConnect: true,\r\n    // Not blur others when highlight in axisPointer.\r\n    notBlur: true,\r\n    batch: toHighlight\r\n  });\r\n}\r\n\r\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\r\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\r\n    var inputAxisInfo = inputAxesInfo[i];\r\n\r\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\r\n      return inputAxisInfo;\r\n    }\r\n  }\r\n}\r\n\r\nfunction makeMapperParam(axisInfo) {\r\n  var axisModel = axisInfo.axis.model;\r\n  var item = {};\r\n  var dim = item.axisDim = axisInfo.axis.dim;\r\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\r\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\r\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\r\n  return item;\r\n}\r\n\r\nfunction illegalPoint(point) {\r\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport AxisView from '../axis/AxisView.js';\r\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\r\nimport AxisPointerModel from './AxisPointerModel.js';\r\nimport AxisPointerView from './AxisPointerView.js';\r\nimport { isArray } from 'zrender/lib/core/util.js';\r\nimport { collect } from './modelHelper.js';\r\nimport axisTrigger from './axisTrigger.js';\r\nexport function install(registers) {\r\n  // CartesianAxisPointer is not supposed to be required here. But consider\r\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\r\n  // CartesianAxisPointer should be able to required somewhere.\r\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\r\n  registers.registerComponentModel(AxisPointerModel);\r\n  registers.registerComponentView(AxisPointerView);\r\n  registers.registerPreprocessor(function (option) {\r\n    // Always has a global axisPointerModel for default setting.\r\n    if (option) {\r\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\r\n      var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\r\n      // is not set, remain null/undefined, otherwise it will\r\n      // override existent link setting.\r\n\r\n      if (link && !isArray(link)) {\r\n        option.axisPointer.link = [link];\r\n      }\r\n    }\r\n  }); // This process should proformed after coordinate systems created\r\n  // and series data processed. So put it on statistic processing stage.\r\n\r\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\r\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\r\n    // allAxesInfo should be updated when setOption performed.\r\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\r\n  }); // Broadcast to all views.\r\n\r\n  registers.registerAction({\r\n    type: 'updateAxisPointer',\r\n    event: 'updateAxisPointer',\r\n    update: ':updateAxisPointer'\r\n  }, axisTrigger);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport ComponentModel from '../../model/Component.js';\r\n\r\nvar TooltipModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TooltipModel, _super);\r\n\r\n  function TooltipModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = TooltipModel.type;\r\n    return _this;\r\n  }\r\n\r\n  TooltipModel.type = 'tooltip';\r\n  TooltipModel.dependencies = ['axisPointer'];\r\n  TooltipModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 60,\r\n    show: true,\r\n    // tooltip main content\r\n    showContent: true,\r\n    // 'trigger' only works on coordinate system.\r\n    // 'item' | 'axis' | 'none'\r\n    trigger: 'item',\r\n    // 'click' | 'mousemove' | 'none'\r\n    triggerOn: 'mousemove|click',\r\n    alwaysShowContent: false,\r\n    displayMode: 'single',\r\n    renderMode: 'auto',\r\n    // whether restraint content inside viewRect.\r\n    // If renderMode: 'richText', default true.\r\n    // If renderMode: 'html', defaut false (for backward compat).\r\n    confine: null,\r\n    showDelay: 0,\r\n    hideDelay: 100,\r\n    // Animation transition time, unit is second\r\n    transitionDuration: 0.4,\r\n    enterable: false,\r\n    backgroundColor: '#fff',\r\n    // box shadow\r\n    shadowBlur: 10,\r\n    shadowColor: 'rgba(0, 0, 0, .2)',\r\n    shadowOffsetX: 1,\r\n    shadowOffsetY: 2,\r\n    // tooltip border radius, unit is px, default is 4\r\n    borderRadius: 4,\r\n    // tooltip border width, unit is px, default is 0 (no border)\r\n    borderWidth: 1,\r\n    // Tooltip inside padding, default is 5 for all direction\r\n    // Array is allowed to set up, right, bottom, left, same with css\r\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\r\n    padding: null,\r\n    // Extra css text\r\n    extraCssText: '',\r\n    // axis indicator, trigger by axis\r\n    axisPointer: {\r\n      // default is line\r\n      // legal values: 'line' | 'shadow' | 'cross'\r\n      type: 'line',\r\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\r\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\r\n      // default is 'auto', chose the axis which type is category.\r\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\r\n      axis: 'auto',\r\n      animation: 'auto',\r\n      animationDurationUpdate: 200,\r\n      animationEasingUpdate: 'exponentialOut',\r\n      crossStyle: {\r\n        color: '#999',\r\n        width: 1,\r\n        type: 'dashed',\r\n        // TODO formatter\r\n        textStyle: {}\r\n      } // lineStyle and shadowStyle should not be specified here,\r\n      // otherwise it will always override those styles on option.axisPointer.\r\n\r\n    },\r\n    textStyle: {\r\n      color: '#666',\r\n      fontSize: 14\r\n    }\r\n  };\r\n  return TooltipModel;\r\n}(ComponentModel);\r\n\r\nexport default TooltipModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { toCamelCase } from '../../util/format.js';\r\nimport env from 'zrender/lib/core/env.js';\r\n/* global document */\r\n\r\nexport function shouldTooltipConfine(tooltipModel) {\r\n  var confineOption = tooltipModel.get('confine');\r\n  return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\r\n  : tooltipModel.get('renderMode') === 'richText';\r\n}\r\n\r\nfunction testStyle(styleProps) {\r\n  if (!env.domSupported) {\r\n    return;\r\n  }\r\n\r\n  var style = document.documentElement.style;\r\n\r\n  for (var i = 0, len = styleProps.length; i < len; i++) {\r\n    if (styleProps[i] in style) {\r\n      return styleProps[i];\r\n    }\r\n  }\r\n}\r\n\r\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\r\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\r\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\r\n  if (!styleVendor) {\r\n    return styleProp;\r\n  }\r\n\r\n  styleProp = toCamelCase(styleProp, true);\r\n  var idx = styleVendor.indexOf(styleProp);\r\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\r\n  return styleVendor.toLowerCase();\r\n}\r\nexport function getComputedStyle(el, style) {\r\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\r\n  return stl ? style ? stl[style] : stl : null;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isString, indexOf, each, bind, isArray, isDom } from 'zrender/lib/core/util.js';\r\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\r\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\r\nimport env from 'zrender/lib/core/env.js';\r\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\r\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\r\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\r\n/* global document, window */\r\n\r\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\r\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\r\n\r\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\r\n\r\nfunction mirrorPos(pos) {\r\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\r\n  return pos;\r\n}\r\n\r\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\r\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\r\n    return '';\r\n  }\r\n\r\n  var backgroundColor = tooltipModel.get('backgroundColor');\r\n  var borderWidth = tooltipModel.get('borderWidth');\r\n  borderColor = convertToColorString(borderColor);\r\n  var arrowPos = mirrorPos(arrowPosition);\r\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\r\n  var positionStyle = '';\r\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\r\n  var rotateDeg;\r\n\r\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\r\n    positionStyle += 'top:50%';\r\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\r\n  } else {\r\n    positionStyle += 'left:50%';\r\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\r\n  }\r\n\r\n  var rotateRadian = rotateDeg * Math.PI / 180;\r\n  var arrowWH = arrowSize + borderWidth;\r\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\r\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\r\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\r\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\r\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\r\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\r\n}\r\n\r\nfunction assembleTransition(duration, onlyFade) {\r\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\r\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\r\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\r\n\r\n  if (!onlyFade) {\r\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\r\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\r\n  }\r\n\r\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\r\n}\r\n\r\nfunction assembleTransform(x, y, toString) {\r\n  // If using float on style, the final width of the dom might\r\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\r\n  var x0 = x.toFixed(0) + 'px';\r\n  var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\r\n\r\n  if (!env.transformSupported) {\r\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\r\n  } // support transform\r\n\r\n\r\n  var is3d = env.transform3dSupported;\r\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\r\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\r\n}\r\n/**\r\n * @param {Object} textStyle\r\n * @return {string}\r\n * @inner\r\n */\r\n\r\n\r\nfunction assembleFont(textStyleModel) {\r\n  var cssText = [];\r\n  var fontSize = textStyleModel.get('fontSize');\r\n  var color = textStyleModel.getTextColor();\r\n  color && cssText.push('color:' + color);\r\n  cssText.push('font:' + textStyleModel.getFont());\r\n  fontSize // @ts-ignore, leave it to the tooltip refactor.\r\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\r\n  var shadowColor = textStyleModel.get('textShadowColor');\r\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\r\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\r\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\r\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\r\n  each(['decoration', 'align'], function (name) {\r\n    var val = textStyleModel.get(name);\r\n    val && cssText.push('text-' + name + ':' + val);\r\n  });\r\n  return cssText.join(';');\r\n}\r\n\r\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\r\n  var cssText = [];\r\n  var transitionDuration = tooltipModel.get('transitionDuration');\r\n  var backgroundColor = tooltipModel.get('backgroundColor');\r\n  var shadowBlur = tooltipModel.get('shadowBlur');\r\n  var shadowColor = tooltipModel.get('shadowColor');\r\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\r\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\r\n  var textStyleModel = tooltipModel.getModel('textStyle');\r\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\r\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\r\n  cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\r\n\r\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\r\n\r\n  if (backgroundColor) {\r\n    cssText.push('background-color:' + backgroundColor);\r\n  } // Border style\r\n\r\n\r\n  each(['width', 'color', 'radius'], function (name) {\r\n    var borderName = 'border-' + name;\r\n    var camelCase = toCamelCase(borderName);\r\n    var val = tooltipModel.get(camelCase);\r\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\r\n  }); // Text style\r\n\r\n  cssText.push(assembleFont(textStyleModel)); // Padding\r\n\r\n  if (padding != null) {\r\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\r\n  }\r\n\r\n  return cssText.join(';') + ';';\r\n} // If not able to make, do not modify the input `out`.\r\n\r\n\r\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\r\n  var zrPainter = zr && zr.painter;\r\n\r\n  if (appendToBody) {\r\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\r\n\r\n    if (zrViewportRoot) {\r\n      // Some APPs might use scale on body, so we support CSS transform here.\r\n      transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\r\n    }\r\n  } else {\r\n    out[0] = zrX;\r\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\r\n    // the sibling of canvas root. So padding of ec container\r\n    // should be considered here.\r\n\r\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\r\n\r\n    if (viewportRootOffset) {\r\n      out[0] += viewportRootOffset.offsetLeft;\r\n      out[1] += viewportRootOffset.offsetTop;\r\n    }\r\n  }\r\n\r\n  out[2] = out[0] / zr.getWidth();\r\n  out[3] = out[1] / zr.getHeight();\r\n}\r\n\r\nvar TooltipHTMLContent =\r\n/** @class */\r\nfunction () {\r\n  function TooltipHTMLContent(container, api, opt) {\r\n    this._show = false;\r\n    this._styleCoord = [0, 0, 0, 0];\r\n    this._enterable = true;\r\n    this._alwaysShowContent = false;\r\n    this._firstShow = true;\r\n    this._longHide = true;\r\n\r\n    if (env.wxa) {\r\n      return null;\r\n    }\r\n\r\n    var el = document.createElement('div'); // TODO: TYPE\r\n\r\n    el.domBelongToZr = true;\r\n    this.el = el;\r\n    var zr = this._zr = api.getZr();\r\n    var appendToBody = this._appendToBody = opt && opt.appendToBody;\r\n    makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\r\n\r\n    if (appendToBody) {\r\n      document.body.appendChild(el);\r\n    } else {\r\n      container.appendChild(el);\r\n    }\r\n\r\n    this._container = container; // FIXME\r\n    // Is it needed to trigger zr event manually if\r\n    // the browser do not support `pointer-events: none`.\r\n\r\n    var self = this;\r\n\r\n    el.onmouseenter = function () {\r\n      // clear the timeout in hideLater and keep showing tooltip\r\n      if (self._enterable) {\r\n        clearTimeout(self._hideTimeout);\r\n        self._show = true;\r\n      }\r\n\r\n      self._inContent = true;\r\n    };\r\n\r\n    el.onmousemove = function (e) {\r\n      e = e || window.event;\r\n\r\n      if (!self._enterable) {\r\n        // `pointer-events: none` is set to tooltip content div\r\n        // if `enterable` is set as `false`, and `el.onmousemove`\r\n        // can not be triggered. But in browser that do not\r\n        // support `pointer-events`, we need to do this:\r\n        // Try trigger zrender event to avoid mouse\r\n        // in and out shape too frequently\r\n        var handler = zr.handler;\r\n        var zrViewportRoot = zr.painter.getViewportRoot();\r\n        normalizeEvent(zrViewportRoot, e, true);\r\n        handler.dispatch('mousemove', e);\r\n      }\r\n    };\r\n\r\n    el.onmouseleave = function () {\r\n      // set `_inContent` to `false` before `hideLater`\r\n      self._inContent = false;\r\n\r\n      if (self._enterable) {\r\n        if (self._show) {\r\n          self.hideLater(self._hideDelay);\r\n        }\r\n      }\r\n    };\r\n  }\r\n  /**\r\n   * Update when tooltip is rendered\r\n   */\r\n\r\n\r\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\r\n    // FIXME\r\n    // Move this logic to ec main?\r\n    var container = this._container;\r\n    var position = getComputedStyle(container, 'position');\r\n    var domStyle = container.style;\r\n\r\n    if (domStyle.position !== 'absolute' && position !== 'absolute') {\r\n      domStyle.position = 'relative';\r\n    } // move tooltip if chart resized\r\n\r\n\r\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\r\n    alwaysShowContent && this._moveIfResized(); // update alwaysShowContent\r\n\r\n    this._alwaysShowContent = alwaysShowContent; // update className\r\n\r\n    this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\r\n    // PENDING\r\n    // this.hide();\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\r\n    clearTimeout(this._hideTimeout);\r\n    clearTimeout(this._longHideTimeout);\r\n    var el = this.el;\r\n    var style = el.style;\r\n    var styleCoord = this._styleCoord;\r\n\r\n    if (!el.innerHTML) {\r\n      style.display = 'none';\r\n    } else {\r\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\r\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\r\n      // triggered by canvas, and cause some unexpectable result like dragging\r\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\r\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\r\n      // scenario.\r\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\r\n    }\r\n\r\n    this._show = true;\r\n    this._firstShow = false;\r\n    this._longHide = false;\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\r\n    var el = this.el;\r\n\r\n    if (content == null) {\r\n      el.innerHTML = '';\r\n      return;\r\n    }\r\n\r\n    var arrow = '';\r\n\r\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\r\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\r\n    }\r\n\r\n    if (isString(content)) {\r\n      el.innerHTML = content + arrow;\r\n    } else if (content) {\r\n      // Clear previous\r\n      el.innerHTML = '';\r\n\r\n      if (!isArray(content)) {\r\n        content = [content];\r\n      }\r\n\r\n      for (var i = 0; i < content.length; i++) {\r\n        if (isDom(content[i]) && content[i].parentNode !== el) {\r\n          el.appendChild(content[i]);\r\n        }\r\n      } // no arrow if empty\r\n\r\n\r\n      if (arrow && el.childNodes.length) {\r\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\r\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\r\n        var arrowEl = document.createElement('div');\r\n        arrowEl.innerHTML = arrow;\r\n        el.appendChild(arrowEl);\r\n      }\r\n    }\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\r\n    this._enterable = enterable;\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.getSize = function () {\r\n    var el = this.el;\r\n    return [el.offsetWidth, el.offsetHeight];\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\r\n    var styleCoord = this._styleCoord;\r\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\r\n\r\n    if (styleCoord[0] != null && styleCoord[1] != null) {\r\n      var style_1 = this.el.style;\r\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\r\n      each(transforms, function (transform) {\r\n        style_1[transform[0]] = transform[1];\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\r\n\r\n\r\n  TooltipHTMLContent.prototype._moveIfResized = function () {\r\n    // The ratio of left to width\r\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\r\n\r\n    var ratioY = this._styleCoord[3];\r\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.hide = function () {\r\n    var _this = this;\r\n\r\n    var style = this.el.style;\r\n    style.visibility = 'hidden';\r\n    style.opacity = '0';\r\n    env.transform3dSupported && (style.willChange = '');\r\n    this._show = false;\r\n    this._longHideTimeout = setTimeout(function () {\r\n      return _this._longHide = true;\r\n    }, 500);\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.hideLater = function (time) {\r\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\r\n      if (time) {\r\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\r\n\r\n        this._show = false;\r\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\r\n      } else {\r\n        this.hide();\r\n      }\r\n    }\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.isShow = function () {\r\n    return this._show;\r\n  };\r\n\r\n  TooltipHTMLContent.prototype.dispose = function () {\r\n    this.el.parentNode.removeChild(this.el);\r\n  };\r\n\r\n  return TooltipHTMLContent;\r\n}();\r\n\r\nexport default TooltipHTMLContent;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport ZRText from 'zrender/lib/graphic/Text.js';\r\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\r\nimport { throwError } from '../../util/log.js';\r\n\r\nvar TooltipRichContent =\r\n/** @class */\r\nfunction () {\r\n  function TooltipRichContent(api) {\r\n    this._show = false;\r\n    this._styleCoord = [0, 0, 0, 0];\r\n    this._alwaysShowContent = false;\r\n    this._enterable = true;\r\n    this._zr = api.getZr();\r\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\r\n  }\r\n  /**\r\n   * Update when tooltip is rendered\r\n   */\r\n\r\n\r\n  TooltipRichContent.prototype.update = function (tooltipModel) {\r\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\r\n    alwaysShowContent && this._moveIfResized(); // update alwaysShowContent\r\n\r\n    this._alwaysShowContent = alwaysShowContent;\r\n  };\r\n\r\n  TooltipRichContent.prototype.show = function () {\r\n    if (this._hideTimeout) {\r\n      clearTimeout(this._hideTimeout);\r\n    }\r\n\r\n    this.el.show();\r\n    this._show = true;\r\n  };\r\n  /**\r\n   * Set tooltip content\r\n   */\r\n\r\n\r\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\r\n    var _this = this;\r\n\r\n    if (zrUtil.isObject(content)) {\r\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\r\n    }\r\n\r\n    if (this.el) {\r\n      this._zr.remove(this.el);\r\n    }\r\n\r\n    var textStyleModel = tooltipModel.getModel('textStyle');\r\n    this.el = new ZRText({\r\n      style: {\r\n        rich: markupStyleCreator.richTextStyles,\r\n        text: content,\r\n        lineHeight: 22,\r\n        borderWidth: 1,\r\n        borderColor: borderColor,\r\n        textShadowColor: textStyleModel.get('textShadowColor'),\r\n        fill: tooltipModel.get(['textStyle', 'color']),\r\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\r\n        verticalAlign: 'top',\r\n        align: 'left'\r\n      },\r\n      z: tooltipModel.get('z')\r\n    });\r\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\r\n      _this.el.style[propName] = tooltipModel.get(propName);\r\n    });\r\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\r\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\r\n    });\r\n\r\n    this._zr.add(this.el);\r\n\r\n    var self = this;\r\n    this.el.on('mouseover', function () {\r\n      // clear the timeout in hideLater and keep showing tooltip\r\n      if (self._enterable) {\r\n        clearTimeout(self._hideTimeout);\r\n        self._show = true;\r\n      }\r\n\r\n      self._inContent = true;\r\n    });\r\n    this.el.on('mouseout', function () {\r\n      if (self._enterable) {\r\n        if (self._show) {\r\n          self.hideLater(self._hideDelay);\r\n        }\r\n      }\r\n\r\n      self._inContent = false;\r\n    });\r\n  };\r\n\r\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\r\n    this._enterable = enterable;\r\n  };\r\n\r\n  TooltipRichContent.prototype.getSize = function () {\r\n    var el = this.el;\r\n    var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\r\n    // if overflow, it will be cut. So calculate them accurately.\r\n\r\n    var shadowOuterSize = calcShadowOuterSize(el.style);\r\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\r\n  };\r\n\r\n  TooltipRichContent.prototype.moveTo = function (x, y) {\r\n    var el = this.el;\r\n\r\n    if (el) {\r\n      var styleCoord = this._styleCoord;\r\n      makeStyleCoord(styleCoord, this._zr, x, y);\r\n      x = styleCoord[0];\r\n      y = styleCoord[1];\r\n      var style = el.style;\r\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\r\n      var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\r\n\r\n      el.x = x + borderWidth + shadowOuterSize.left;\r\n      el.y = y + borderWidth + shadowOuterSize.top;\r\n      el.markRedraw();\r\n    }\r\n  };\r\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\r\n\r\n\r\n  TooltipRichContent.prototype._moveIfResized = function () {\r\n    // The ratio of left to width\r\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\r\n\r\n    var ratioY = this._styleCoord[3];\r\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\r\n  };\r\n\r\n  TooltipRichContent.prototype.hide = function () {\r\n    if (this.el) {\r\n      this.el.hide();\r\n    }\r\n\r\n    this._show = false;\r\n  };\r\n\r\n  TooltipRichContent.prototype.hideLater = function (time) {\r\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\r\n      if (time) {\r\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\r\n\r\n        this._show = false;\r\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\r\n      } else {\r\n        this.hide();\r\n      }\r\n    }\r\n  };\r\n\r\n  TooltipRichContent.prototype.isShow = function () {\r\n    return this._show;\r\n  };\r\n\r\n  TooltipRichContent.prototype.dispose = function () {\r\n    this._zr.remove(this.el);\r\n  };\r\n\r\n  return TooltipRichContent;\r\n}();\r\n\r\nfunction mathMaxWith0(val) {\r\n  return Math.max(0, val);\r\n}\r\n\r\nfunction calcShadowOuterSize(style) {\r\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\r\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\r\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\r\n  return {\r\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\r\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\r\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\r\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\r\n  };\r\n}\r\n\r\nfunction makeStyleCoord(out, zr, zrX, zrY) {\r\n  out[0] = zrX;\r\n  out[1] = zrY;\r\n  out[2] = out[0] / zr.getWidth();\r\n  out[3] = out[1] / zr.getHeight();\r\n}\r\n\r\nexport default TooltipRichContent;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\nimport { __extends } from \"tslib\";\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\r\nimport env from 'zrender/lib/core/env.js';\r\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\r\nimport TooltipRichContent from './TooltipRichContent.js';\r\nimport { convertToColorString, formatTpl } from '../../util/format.js';\r\nimport { parsePercent } from '../../util/number.js';\r\nimport { Rect } from '../../util/graphic.js';\r\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\r\nimport { getLayoutRect } from '../../util/layout.js';\r\nimport Model from '../../model/Model.js';\r\nimport * as globalListener from '../axisPointer/globalListener.js';\r\nimport * as axisHelper from '../../coord/axisHelper.js';\r\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\r\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\r\nimport ComponentView from '../../view/Component.js';\r\nimport { format as timeFormat } from '../../util/time.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { shouldTooltipConfine } from './helper.js';\r\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\r\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\r\nimport { findEventDispatcher } from '../../util/event.js';\r\nimport { clear, createOrUpdate } from '../../util/throttle.js';\r\nvar proxyRect = new Rect({\r\n  shape: {\r\n    x: -1,\r\n    y: -1,\r\n    width: 2,\r\n    height: 2\r\n  }\r\n});\r\n\r\nvar TooltipView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TooltipView, _super);\r\n\r\n  function TooltipView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = TooltipView.type;\r\n    return _this;\r\n  }\r\n\r\n  TooltipView.prototype.init = function (ecModel, api) {\r\n    if (env.node || !api.getDom()) {\r\n      return;\r\n    }\r\n\r\n    var tooltipModel = ecModel.getComponent('tooltip');\r\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\r\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\r\n      appendToBody: tooltipModel.get('appendToBody', true)\r\n    });\r\n  };\r\n\r\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\r\n    if (env.node || !api.getDom()) {\r\n      return;\r\n    } // Reset\r\n\r\n\r\n    this.group.removeAll();\r\n    this._tooltipModel = tooltipModel;\r\n    this._ecModel = ecModel;\r\n    this._api = api;\r\n    var tooltipContent = this._tooltipContent;\r\n    tooltipContent.update(tooltipModel);\r\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\r\n\r\n    this._initGlobalListener();\r\n\r\n    this._keepShow(); // PENDING\r\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\r\n    // which causes that the `updatePosition` function was also called frequently.\r\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\r\n    // To avoid frequent triggering,\r\n    // consider throttling it in 50ms when transition is enabled\r\n\r\n\r\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\r\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\r\n    } else {\r\n      clear(this, '_updatePosition');\r\n    }\r\n  };\r\n\r\n  TooltipView.prototype._initGlobalListener = function () {\r\n    var tooltipModel = this._tooltipModel;\r\n    var triggerOn = tooltipModel.get('triggerOn');\r\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\r\n      // If 'none', it is not controlled by mouse totally.\r\n      if (triggerOn !== 'none') {\r\n        if (triggerOn.indexOf(currTrigger) >= 0) {\r\n          this._tryShow(e, dispatchAction);\r\n        } else if (currTrigger === 'leave') {\r\n          this._hide(dispatchAction);\r\n        }\r\n      }\r\n    }, this));\r\n  };\r\n\r\n  TooltipView.prototype._keepShow = function () {\r\n    var tooltipModel = this._tooltipModel;\r\n    var ecModel = this._ecModel;\r\n    var api = this._api;\r\n    var triggerOn = tooltipModel.get('triggerOn'); // Try to keep the tooltip show when refreshing\r\n\r\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\r\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\r\n    // which is not expected.\r\n    && triggerOn !== 'none' && triggerOn !== 'click') {\r\n      var self_1 = this;\r\n      clearTimeout(this._refreshUpdateTimeout);\r\n      this._refreshUpdateTimeout = setTimeout(function () {\r\n        // Show tip next tick after other charts are rendered\r\n        // In case highlight action has wrong result\r\n        // FIXME\r\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\r\n          x: self_1._lastX,\r\n          y: self_1._lastY,\r\n          dataByCoordSys: self_1._lastDataByCoordSys\r\n        });\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * Show tip manually by\r\n   * dispatchAction({\r\n   *     type: 'showTip',\r\n   *     x: 10,\r\n   *     y: 10\r\n   * });\r\n   * Or\r\n   * dispatchAction({\r\n   *      type: 'showTip',\r\n   *      seriesIndex: 0,\r\n   *      dataIndex or dataIndexInside or name\r\n   * });\r\n   *\r\n   *  TODO Batch\r\n   */\r\n\r\n\r\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\r\n    if (payload.from === this.uid || env.node || !api.getDom()) {\r\n      return;\r\n    }\r\n\r\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\r\n\r\n    this._ticket = ''; // When triggered from axisPointer.\r\n\r\n    var dataByCoordSys = payload.dataByCoordSys;\r\n    var cmptRef = findComponentReference(payload, ecModel, api);\r\n\r\n    if (cmptRef) {\r\n      var rect = cmptRef.el.getBoundingRect().clone();\r\n      rect.applyTransform(cmptRef.el.transform);\r\n\r\n      this._tryShow({\r\n        offsetX: rect.x + rect.width / 2,\r\n        offsetY: rect.y + rect.height / 2,\r\n        target: cmptRef.el,\r\n        position: payload.position,\r\n        // When manully trigger, the mouse is not on the el, so we'd better to\r\n        // position tooltip on the bottom of the el and display arrow is possible.\r\n        positionDefault: 'bottom'\r\n      }, dispatchAction);\r\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\r\n      var el = proxyRect;\r\n      el.x = payload.x;\r\n      el.y = payload.y;\r\n      el.update();\r\n      getECData(el).tooltipConfig = {\r\n        name: null,\r\n        option: payload.tooltip\r\n      }; // Manually show tooltip while view is not using zrender elements.\r\n\r\n      this._tryShow({\r\n        offsetX: payload.x,\r\n        offsetY: payload.y,\r\n        target: el\r\n      }, dispatchAction);\r\n    } else if (dataByCoordSys) {\r\n      this._tryShow({\r\n        offsetX: payload.x,\r\n        offsetY: payload.y,\r\n        position: payload.position,\r\n        dataByCoordSys: dataByCoordSys,\r\n        tooltipOption: payload.tooltipOption\r\n      }, dispatchAction);\r\n    } else if (payload.seriesIndex != null) {\r\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\r\n        return;\r\n      }\r\n\r\n      var pointInfo = findPointFromSeries(payload, ecModel);\r\n      var cx = pointInfo.point[0];\r\n      var cy = pointInfo.point[1];\r\n\r\n      if (cx != null && cy != null) {\r\n        this._tryShow({\r\n          offsetX: cx,\r\n          offsetY: cy,\r\n          target: pointInfo.el,\r\n          position: payload.position,\r\n          // When manully trigger, the mouse is not on the el, so we'd better to\r\n          // position tooltip on the bottom of the el and display arrow is possible.\r\n          positionDefault: 'bottom'\r\n        }, dispatchAction);\r\n      }\r\n    } else if (payload.x != null && payload.y != null) {\r\n      // FIXME\r\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\r\n      api.dispatchAction({\r\n        type: 'updateAxisPointer',\r\n        x: payload.x,\r\n        y: payload.y\r\n      });\r\n\r\n      this._tryShow({\r\n        offsetX: payload.x,\r\n        offsetY: payload.y,\r\n        position: payload.position,\r\n        target: api.getZr().findHover(payload.x, payload.y).target\r\n      }, dispatchAction);\r\n    }\r\n  };\r\n\r\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\r\n    var tooltipContent = this._tooltipContent;\r\n\r\n    if (this._tooltipModel) {\r\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\r\n    }\r\n\r\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\r\n\r\n    if (payload.from !== this.uid) {\r\n      this._hide(makeDispatchAction(payload, api));\r\n    }\r\n  }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\r\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\r\n  // and tooltip.\r\n\r\n\r\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\r\n    var seriesIndex = payload.seriesIndex;\r\n    var dataIndex = payload.dataIndex; // @ts-ignore\r\n\r\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\r\n\r\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\r\n      return;\r\n    }\r\n\r\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\r\n\r\n    if (!seriesModel) {\r\n      return;\r\n    }\r\n\r\n    var data = seriesModel.getData();\r\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\r\n\r\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\r\n      return;\r\n    }\r\n\r\n    api.dispatchAction({\r\n      type: 'updateAxisPointer',\r\n      seriesIndex: seriesIndex,\r\n      dataIndex: dataIndex,\r\n      position: payload.position\r\n    });\r\n    return true;\r\n  };\r\n\r\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\r\n    var el = e.target;\r\n    var tooltipModel = this._tooltipModel;\r\n\r\n    if (!tooltipModel) {\r\n      return;\r\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\r\n\r\n\r\n    this._lastX = e.offsetX;\r\n    this._lastY = e.offsetY;\r\n    var dataByCoordSys = e.dataByCoordSys;\r\n\r\n    if (dataByCoordSys && dataByCoordSys.length) {\r\n      this._showAxisTooltip(dataByCoordSys, e);\r\n    } else if (el) {\r\n      this._lastDataByCoordSys = null;\r\n      var seriesDispatcher_1;\r\n      var cmptDispatcher_1;\r\n      findEventDispatcher(el, function (target) {\r\n        // Always show item tooltip if mouse is on the element with dataIndex\r\n        if (getECData(target).dataIndex != null) {\r\n          seriesDispatcher_1 = target;\r\n          return true;\r\n        } // Tooltip provided directly. Like legend.\r\n\r\n\r\n        if (getECData(target).tooltipConfig != null) {\r\n          cmptDispatcher_1 = target;\r\n          return true;\r\n        }\r\n      }, true);\r\n\r\n      if (seriesDispatcher_1) {\r\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\r\n      } else if (cmptDispatcher_1) {\r\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\r\n      } else {\r\n        this._hide(dispatchAction);\r\n      }\r\n    } else {\r\n      this._lastDataByCoordSys = null;\r\n\r\n      this._hide(dispatchAction);\r\n    }\r\n  };\r\n\r\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\r\n    // showDelay is used in this case: tooltip.enterable is set\r\n    // as true. User intent to move mouse into tooltip and click\r\n    // something. `showDelay` makes it easier to enter the content\r\n    // but tooltip do not move immediately.\r\n    var delay = tooltipModel.get('showDelay');\r\n    cb = bind(cb, this);\r\n    clearTimeout(this._showTimout);\r\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\r\n  };\r\n\r\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\r\n    var ecModel = this._ecModel;\r\n    var globalTooltipModel = this._tooltipModel;\r\n    var point = [e.offsetX, e.offsetY];\r\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\r\n    var renderMode = this._renderMode;\r\n    var cbParamsList = [];\r\n    var articleMarkup = createTooltipMarkup('section', {\r\n      blocks: [],\r\n      noHeader: true\r\n    }); // Only for legacy: `Serise['formatTooltip']` returns a string.\r\n\r\n    var markupTextArrLegacy = [];\r\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\r\n    each(dataByCoordSys, function (itemCoordSys) {\r\n      each(itemCoordSys.dataByAxis, function (axisItem) {\r\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\r\n        var axisValue = axisItem.value;\r\n\r\n        if (!axisModel || axisValue == null) {\r\n          return;\r\n        }\r\n\r\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\r\n        var axisSectionMarkup = createTooltipMarkup('section', {\r\n          header: axisValueLabel,\r\n          noHeader: !trim(axisValueLabel),\r\n          sortBlocks: true,\r\n          blocks: []\r\n        });\r\n        articleMarkup.blocks.push(axisSectionMarkup);\r\n        each(axisItem.seriesDataIndices, function (idxItem) {\r\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\r\n          var dataIndex = idxItem.dataIndexInside;\r\n          var cbParams = series.getDataParams(dataIndex); // Can't find data.\r\n\r\n          if (cbParams.dataIndex < 0) {\r\n            return;\r\n          }\r\n\r\n          cbParams.axisDim = axisItem.axisDim;\r\n          cbParams.axisIndex = axisItem.axisIndex;\r\n          cbParams.axisType = axisItem.axisType;\r\n          cbParams.axisId = axisItem.axisId;\r\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\r\n            value: axisValue\r\n          });\r\n          cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\r\n          // text in `formatter` callback and use those markers style.\r\n\r\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\r\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\r\n          var frag = seriesTooltipResult.frag;\r\n\r\n          if (frag) {\r\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\r\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\r\n              valueFormatter: valueFormatter\r\n            }, frag) : frag);\r\n          }\r\n\r\n          if (seriesTooltipResult.text) {\r\n            markupTextArrLegacy.push(seriesTooltipResult.text);\r\n          }\r\n\r\n          cbParamsList.push(cbParams);\r\n        });\r\n      });\r\n    }); // In most cases, the second axis is displays upper on the first one.\r\n    // So we reverse it to look better.\r\n\r\n    articleMarkup.blocks.reverse();\r\n    markupTextArrLegacy.reverse();\r\n    var positionExpr = e.position;\r\n    var orderMode = singleTooltipModel.get('order');\r\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\r\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\r\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\r\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\r\n\r\n    this._showOrMove(singleTooltipModel, function () {\r\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\r\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\r\n      } else {\r\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\r\n      }\r\n    }); // Do not trigger events here, because this branch only be entered\r\n    // from dispatchAction.\r\n\r\n  };\r\n\r\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\r\n    var ecModel = this._ecModel;\r\n    var ecData = getECData(dispatcher); // Use dataModel in element if possible\r\n    // Used when mouseover on a element like markPoint or edge\r\n    // In which case, the data is not main data in series.\r\n\r\n    var seriesIndex = ecData.seriesIndex;\r\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\r\n\r\n    var dataModel = ecData.dataModel || seriesModel;\r\n    var dataIndex = ecData.dataIndex;\r\n    var dataType = ecData.dataType;\r\n    var data = dataModel.getData(dataType);\r\n    var renderMode = this._renderMode;\r\n    var positionDefault = e.positionDefault;\r\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\r\n      position: positionDefault\r\n    } : null);\r\n    var tooltipTrigger = tooltipModel.get('trigger');\r\n\r\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\r\n      return;\r\n    }\r\n\r\n    var params = dataModel.getDataParams(dataIndex, dataType);\r\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\r\n    // text in `formatter` callback and use those markers style.\r\n\r\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\r\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\r\n    var orderMode = tooltipModel.get('order');\r\n    var valueFormatter = tooltipModel.get('valueFormatter');\r\n    var frag = seriesTooltipResult.frag;\r\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\r\n      valueFormatter: valueFormatter\r\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\r\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\r\n\r\n    this._showOrMove(tooltipModel, function () {\r\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\r\n    }); // FIXME\r\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\r\n\r\n\r\n    dispatchAction({\r\n      type: 'showTip',\r\n      dataIndexInside: dataIndex,\r\n      dataIndex: data.getRawIndex(dataIndex),\r\n      seriesIndex: seriesIndex,\r\n      from: this.uid\r\n    });\r\n  };\r\n\r\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\r\n    var ecData = getECData(el);\r\n    var tooltipConfig = ecData.tooltipConfig;\r\n    var tooltipOpt = tooltipConfig.option || {};\r\n\r\n    if (isString(tooltipOpt)) {\r\n      var content = tooltipOpt;\r\n      tooltipOpt = {\r\n        content: content,\r\n        // Fixed formatter\r\n        formatter: content\r\n      };\r\n    }\r\n\r\n    var tooltipModelCascade = [tooltipOpt];\r\n\r\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\r\n\r\n    if (cmpt) {\r\n      tooltipModelCascade.push(cmpt);\r\n    } // In most cases, component tooltip formatter has different params with series tooltip formatter,\r\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\r\n    // by convention, we do not use it as the default formatter for component.\r\n\r\n\r\n    tooltipModelCascade.push({\r\n      formatter: tooltipOpt.content\r\n    });\r\n    var positionDefault = e.positionDefault;\r\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\r\n      position: positionDefault\r\n    } : null);\r\n    var defaultHtml = subTooltipModel.get('content');\r\n    var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\r\n\r\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\r\n    // only works on coordinate system. In fact, we have not found case\r\n    // that requires setting `trigger` nothing on component yet.\r\n\r\n    this._showOrMove(subTooltipModel, function () {\r\n      // Use formatterParams from element defined in component\r\n      // Avoid users modify it.\r\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\r\n\r\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\r\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\r\n\r\n\r\n    dispatchAction({\r\n      type: 'showTip',\r\n      from: this.uid\r\n    });\r\n  };\r\n\r\n  TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\r\n  // Instead of top level tooltip.\r\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\r\n    // Reset ticket\r\n    this._ticket = '';\r\n\r\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\r\n      return;\r\n    }\r\n\r\n    var tooltipContent = this._tooltipContent;\r\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\r\n    var formatter = tooltipModel.get('formatter');\r\n    positionExpr = positionExpr || tooltipModel.get('position');\r\n    var html = defaultHtml;\r\n\r\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\r\n\r\n    var nearPointColor = nearPoint.color;\r\n\r\n    if (formatter) {\r\n      if (isString(formatter)) {\r\n        var useUTC = tooltipModel.ecModel.get('useUTC');\r\n        var params0 = isArray(params) ? params[0] : params;\r\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\r\n        html = formatter;\r\n\r\n        if (isTimeAxis) {\r\n          html = timeFormat(params0.axisValue, html, useUTC);\r\n        }\r\n\r\n        html = formatTpl(html, params, true);\r\n      } else if (isFunction(formatter)) {\r\n        var callback = bind(function (cbTicket, html) {\r\n          if (cbTicket === this._ticket) {\r\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\r\n\r\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\r\n          }\r\n        }, this);\r\n        this._ticket = asyncTicket;\r\n        html = formatter(params, asyncTicket, callback);\r\n      } else {\r\n        html = formatter;\r\n      }\r\n    }\r\n\r\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\r\n    tooltipContent.show(tooltipModel, nearPointColor);\r\n\r\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\r\n  };\r\n\r\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\r\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\r\n      return {\r\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\r\n      };\r\n    }\r\n\r\n    if (!isArray(tooltipDataParams)) {\r\n      return {\r\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\r\n      };\r\n    }\r\n  };\r\n\r\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\r\n  y, // Mouse y\r\n  content, params, el) {\r\n    var viewWidth = this._api.getWidth();\r\n\r\n    var viewHeight = this._api.getHeight();\r\n\r\n    positionExpr = positionExpr || tooltipModel.get('position');\r\n    var contentSize = content.getSize();\r\n    var align = tooltipModel.get('align');\r\n    var vAlign = tooltipModel.get('verticalAlign');\r\n    var rect = el && el.getBoundingRect().clone();\r\n    el && rect.applyTransform(el.transform);\r\n\r\n    if (isFunction(positionExpr)) {\r\n      // Callback of position can be an array or a string specify the position\r\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\r\n        viewSize: [viewWidth, viewHeight],\r\n        contentSize: contentSize.slice()\r\n      });\r\n    }\r\n\r\n    if (isArray(positionExpr)) {\r\n      x = parsePercent(positionExpr[0], viewWidth);\r\n      y = parsePercent(positionExpr[1], viewHeight);\r\n    } else if (isObject(positionExpr)) {\r\n      var boxLayoutPosition = positionExpr;\r\n      boxLayoutPosition.width = contentSize[0];\r\n      boxLayoutPosition.height = contentSize[1];\r\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\r\n        width: viewWidth,\r\n        height: viewHeight\r\n      });\r\n      x = layoutRect.x;\r\n      y = layoutRect.y;\r\n      align = null; // When positionExpr is left/top/right/bottom,\r\n      // align and verticalAlign will not work.\r\n\r\n      vAlign = null;\r\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\r\n    else if (isString(positionExpr) && el) {\r\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\r\n        x = pos[0];\r\n        y = pos[1];\r\n      } else {\r\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\r\n        x = pos[0];\r\n        y = pos[1];\r\n      }\r\n\r\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\r\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\r\n\r\n    if (shouldTooltipConfine(tooltipModel)) {\r\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\r\n      x = pos[0];\r\n      y = pos[1];\r\n    }\r\n\r\n    content.moveTo(x, y);\r\n  }; // FIXME\r\n  // Should we remove this but leave this to user?\r\n\r\n\r\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\r\n    var lastCoordSys = this._lastDataByCoordSys;\r\n    var lastCbParamsList = this._cbParamsList;\r\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\r\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\r\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\r\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\r\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\r\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\r\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\r\n        var thisItem = thisDataByAxis[indexAxis] || {};\r\n        var lastIndices = lastItem.seriesDataIndices || [];\r\n        var newIndices = thisItem.seriesDataIndices || [];\r\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\r\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\r\n          var newIdxItem = newIndices[j];\r\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\r\n        }); // check is cbParams data value changed\r\n\r\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\r\n          var seriesIdx = idxItem.seriesIndex;\r\n          var cbParams = cbParamsList[seriesIdx];\r\n          var lastCbParams = lastCbParamsList[seriesIdx];\r\n\r\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\r\n            contentNotChanged = false;\r\n          }\r\n        });\r\n      });\r\n    });\r\n    this._lastDataByCoordSys = dataByCoordSys;\r\n    this._cbParamsList = cbParamsList;\r\n    return !!contentNotChanged;\r\n  };\r\n\r\n  TooltipView.prototype._hide = function (dispatchAction) {\r\n    // Do not directly hideLater here, because this behavior may be prevented\r\n    // in dispatchAction when showTip is dispatched.\r\n    // FIXME\r\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\r\n    this._lastDataByCoordSys = null;\r\n    dispatchAction({\r\n      type: 'hideTip',\r\n      from: this.uid\r\n    });\r\n  };\r\n\r\n  TooltipView.prototype.dispose = function (ecModel, api) {\r\n    if (env.node || !api.getDom()) {\r\n      return;\r\n    }\r\n\r\n    clear(this, '_updatePosition');\r\n\r\n    this._tooltipContent.dispose();\r\n\r\n    globalListener.unregister('itemTooltip', api);\r\n  };\r\n\r\n  TooltipView.type = 'tooltip';\r\n  return TooltipView;\r\n}(ComponentView);\r\n/**\r\n * From top to bottom. (the last one should be globalTooltipModel);\r\n */\r\n\r\n\r\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\r\n  // Last is always tooltip model.\r\n  var ecModel = globalTooltipModel.ecModel;\r\n  var resultModel;\r\n\r\n  if (defaultTooltipOption) {\r\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\r\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\r\n  } else {\r\n    resultModel = globalTooltipModel;\r\n  }\r\n\r\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\r\n    var tooltipOpt = modelCascade[i];\r\n\r\n    if (tooltipOpt) {\r\n      if (tooltipOpt instanceof Model) {\r\n        tooltipOpt = tooltipOpt.get('tooltip', true);\r\n      } // In each data item tooltip can be simply write:\r\n      // {\r\n      //  value: 10,\r\n      //  tooltip: 'Something you need to know'\r\n      // }\r\n\r\n\r\n      if (isString(tooltipOpt)) {\r\n        tooltipOpt = {\r\n          formatter: tooltipOpt\r\n        };\r\n      }\r\n\r\n      if (tooltipOpt) {\r\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\r\n      }\r\n    }\r\n  }\r\n\r\n  return resultModel;\r\n}\r\n\r\nfunction makeDispatchAction(payload, api) {\r\n  return payload.dispatchAction || bind(api.dispatchAction, api);\r\n}\r\n\r\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\r\n  var size = content.getSize();\r\n  var width = size[0];\r\n  var height = size[1];\r\n\r\n  if (gapH != null) {\r\n    // Add extra 2 pixels for this case:\r\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\r\n    // When the right edge of the tooltip box is on the right side of the\r\n    // viewport, the `float` layout might push the \"values\" to the second line.\r\n    if (x + width + gapH + 2 > viewWidth) {\r\n      x -= width + gapH;\r\n    } else {\r\n      x += gapH;\r\n    }\r\n  }\r\n\r\n  if (gapV != null) {\r\n    if (y + height + gapV > viewHeight) {\r\n      y -= height + gapV;\r\n    } else {\r\n      y += gapV;\r\n    }\r\n  }\r\n\r\n  return [x, y];\r\n}\r\n\r\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\r\n  var size = content.getSize();\r\n  var width = size[0];\r\n  var height = size[1];\r\n  x = Math.min(x + width, viewWidth) - width;\r\n  y = Math.min(y + height, viewHeight) - height;\r\n  x = Math.max(x, 0);\r\n  y = Math.max(y, 0);\r\n  return [x, y];\r\n}\r\n\r\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\r\n  var domWidth = contentSize[0];\r\n  var domHeight = contentSize[1];\r\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\r\n  var x = 0;\r\n  var y = 0;\r\n  var rectWidth = rect.width;\r\n  var rectHeight = rect.height;\r\n\r\n  switch (position) {\r\n    case 'inside':\r\n      x = rect.x + rectWidth / 2 - domWidth / 2;\r\n      y = rect.y + rectHeight / 2 - domHeight / 2;\r\n      break;\r\n\r\n    case 'top':\r\n      x = rect.x + rectWidth / 2 - domWidth / 2;\r\n      y = rect.y - domHeight - offset;\r\n      break;\r\n\r\n    case 'bottom':\r\n      x = rect.x + rectWidth / 2 - domWidth / 2;\r\n      y = rect.y + rectHeight + offset;\r\n      break;\r\n\r\n    case 'left':\r\n      x = rect.x - domWidth - offset;\r\n      y = rect.y + rectHeight / 2 - domHeight / 2;\r\n      break;\r\n\r\n    case 'right':\r\n      x = rect.x + rectWidth + offset;\r\n      y = rect.y + rectHeight / 2 - domHeight / 2;\r\n  }\r\n\r\n  return [x, y];\r\n}\r\n\r\nfunction isCenterAlign(align) {\r\n  return align === 'center' || align === 'middle';\r\n}\r\n/**\r\n * Find target component by payload like:\r\n * ```js\r\n * { legendId: 'some_id', name: 'xxx' }\r\n * { toolboxIndex: 1, name: 'xxx' }\r\n * { geoName: 'some_name', name: 'xxx' }\r\n * ```\r\n * PENDING: at present only\r\n *\r\n * If not found, return null/undefined.\r\n */\r\n\r\n\r\nfunction findComponentReference(payload, ecModel, api) {\r\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\r\n  var componentMainType = queryOptionMap.keys()[0];\r\n\r\n  if (!componentMainType || componentMainType === 'series') {\r\n    return;\r\n  }\r\n\r\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\r\n    useDefault: false,\r\n    enableAll: false,\r\n    enableNone: false\r\n  });\r\n  var model = queryResult.models[0];\r\n\r\n  if (!model) {\r\n    return;\r\n  }\r\n\r\n  var view = api.getViewOfComponentModel(model);\r\n  var el;\r\n  view.group.traverse(function (subEl) {\r\n    var tooltipConfig = getECData(subEl).tooltipConfig;\r\n\r\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\r\n      el = subEl;\r\n      return true; // stop\r\n    }\r\n  });\r\n\r\n  if (el) {\r\n    return {\r\n      componentMainType: componentMainType,\r\n      componentIndex: model.componentIndex,\r\n      el: el\r\n    };\r\n  }\r\n}\r\n\r\nexport default TooltipView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { install as installAxisPointer } from '../axisPointer/install.js';\r\nimport { use } from '../../extension.js';\r\nimport TooltipModel from './TooltipModel.js';\r\nimport TooltipView from './TooltipView.js';\r\nimport { noop } from 'zrender/lib/core/util.js';\r\nexport function install(registers) {\r\n  use(installAxisPointer);\r\n  registers.registerComponentModel(TooltipModel);\r\n  registers.registerComponentView(TooltipView);\r\n  /**\r\n   * @action\r\n   * @property {string} type\r\n   * @property {number} seriesIndex\r\n   * @property {number} dataIndex\r\n   * @property {number} [x]\r\n   * @property {number} [y]\r\n   */\r\n\r\n  registers.registerAction({\r\n    type: 'showTip',\r\n    event: 'showTip',\r\n    update: 'tooltip:manuallyShowTip'\r\n  }, noop);\r\n  registers.registerAction({\r\n    type: 'hideTip',\r\n    event: 'hideTip',\r\n    update: 'tooltip:manuallyHideTip'\r\n  }, noop);\r\n}"],
  "mappings": "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",
  "names": ["clone", "bind", "BaseAxisPointer", "updateProps", "CartesianAxisPointer", "AxisPointerModel", "inner", "each", "AxisPointerView", "Component_default", "inner", "key", "TooltipModel", "translate", "TooltipHTMLContent", "TooltipRichContent", "makeStyleCoord", "TooltipView", "makeDispatchAction", "html", "Component_default", "install"]
}
